name: Manage Docs Tags and Issues

# Scans docs/**/*.md for TODO/PLACEHOLDER/NOTE tags and tracks them in GitHub Issues.
# See scripts/manage-docs-tags.js for full logic and design goals.

on:
  push:
    branches:
      - main
  schedule:
    - cron: '0 7 * * *'  # Daily at 07:00 UTC (08:00 Brussels winter / 09:00 summer)
  issue_comment:
    types: [created]
  workflow_dispatch:

concurrency:
  group: "manage-docs-tags"
  cancel-in-progress: false

permissions:
  contents: write
  issues: write
  pull-requests: write

jobs:
  manage-docs-tags:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout repository
        uses: actions/checkout@v4
        with:
          fetch-depth: 1

      - name: Manage Docs Tags and Issues
        uses: actions/github-script@v7
        with:
          github-token: ${{ secrets.GITHUB_TOKEN }}
          script: |
            const { run } = require('./scripts/manage-docs-tags.js');
            await run({ github, context, core });
