
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="fmri-nimare.html">
      
      
        <link rel="next" href="../eeg/index.html">
      
      
      <link rel="icon" href="../../assets/hoplab_favicon_white.ico">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.15">
    
    
      
        <title>fMRIprep on HPC - Hoplab Wiki</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.342714a4.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
        <script src="https://unpkg.com/iframe-worker/shim"></script>
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../stylesheets/extra.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      
  


  
  

<script id="__analytics">function __md_analytics(){function e(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],e("js",new Date),e("config","G-71T36SYGT2"),document.addEventListener("DOMContentLoaded",(function(){document.forms.search&&document.forms.search.query.addEventListener("blur",(function(){this.value&&e("event","search",{search_term:this.value})}));document$.subscribe((function(){var t=document.forms.feedback;if(void 0!==t)for(var a of t.querySelectorAll("[type=submit]"))a.addEventListener("click",(function(a){a.preventDefault();var n=document.location.pathname,d=this.getAttribute("data-md-value");e("event","feedback",{page:n,data:d}),t.firstElementChild.disabled=!0;var r=t.querySelector(".md-feedback__note [data-md-value='"+d+"']");r&&(r.hidden=!1)})),t.hidden=!1})),location$.subscribe((function(t){e("config","G-71T36SYGT2",{page_path:t.pathname})}))}));var t=document.createElement("script");t.async=!0,t.src="https://www.googletagmanager.com/gtag/js?id=G-71T36SYGT2",document.getElementById("__analytics").insertAdjacentElement("afterEnd",t)}</script>
  
    <script>if("undefined"!=typeof __md_analytics){var consent=__md_get("__consent");consent&&consent.analytics&&__md_analytics()}</script>
  

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="custom" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#ku-leuven-hpc-getting-started" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow md-header--lifted" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../index.html" title="Hoplab Wiki" class="md-header__button md-logo" aria-label="Hoplab Wiki" data-md-component="logo">
      
  <img src="../../assets/thicker_white_brain.svg" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Hoplab Wiki
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              fMRIprep on HPC
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="custom" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2a7 7 0 0 0-7 7c0 2.38 1.19 4.47 3 5.74V17a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1v-2.26c1.81-1.27 3-3.36 3-5.74a7 7 0 0 0-7-7M9 21a1 1 0 0 0 1 1h4a1 1 0 0 0 1-1v-1H9z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="custom" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2a7 7 0 0 1 7 7c0 2.38-1.19 4.47-3 5.74V17a1 1 0 0 1-1 1H9a1 1 0 0 1-1-1v-2.26C6.19 13.47 5 11.38 5 9a7 7 0 0 1 7-7M9 21v-1h6v1a1 1 0 0 1-1 1h-4a1 1 0 0 1-1-1m3-17a5 5 0 0 0-5 5c0 2.05 1.23 3.81 3 4.58V16h4v-2.42c1.77-.77 3-2.53 3-4.58a5 5 0 0 0-5-5"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/HOPLAB-LBP/hoplab-wiki/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
  </div>
  <div class="md-source__repository">
    HOPLAB-LBP/hoplab-wiki
  </div>
</a>
      </div>
    
  </nav>
  
    
      
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../index.html" class="md-tabs__link">
        
  
  
    
  
  Home

      </a>
    </li>
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../get-started/index.html" class="md-tabs__link">
          
  
  
    
  
  Getting started

        </a>
      </li>
    
  

      
        
  
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../index.html" class="md-tabs__link">
          
  
  
    
  
  Research

        </a>
      </li>
    
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../outreach.html" class="md-tabs__link">
        
  
  
    
  
  Science outreach

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../contribute.html" class="md-tabs__link">
        
  
  
    
  
  Contribute

      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
    
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../index.html" title="Hoplab Wiki" class="md-nav__button md-logo" aria-label="Hoplab Wiki" data-md-component="logo">
      
  <img src="../../assets/thicker_white_brain.svg" alt="logo">

    </a>
    Hoplab Wiki
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/HOPLAB-LBP/hoplab-wiki/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
  </div>
  <div class="md-source__repository">
    HOPLAB-LBP/hoplab-wiki
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../index.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Home
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../get-started/index.html" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Getting started
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_2" id="__nav_2_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Getting started
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../get-started/useful-links.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Useful links
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../get-started/mailing-lists.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Mailing lists
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../get-started/practical-setup.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Practical set-up
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../get-started/computer-setup.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Computer set-up
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../get-started/admin-procedures.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Administrative procedures
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../get-started/student-starter-pack.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Student starter pack
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
        
        
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" checked>
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../index.html" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Research
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_3" id="__nav_3_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Research
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_2" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../ethics/index.html" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Ethical approval
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_3_2" id="__nav_3_2_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_2">
            <span class="md-nav__icon md-icon"></span>
            Ethical approval
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ethics/MEC.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    EC onderzoek
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ethics/SMEC.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    SMEC
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_3" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../coding/index.html" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Coding practices
    
  </span>
  

            </a>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_3">
            <span class="md-nav__icon md-icon"></span>
            Coding practices
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_4" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../behaviour/index.html" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Behaviour
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_3_4" id="__nav_3_4_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_4">
            <span class="md-nav__icon md-icon"></span>
            Behaviour
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../behaviour/bh-participants.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Find participants
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_4_3" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../behaviour/experimental-setup/index.html" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Set up your experiment
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_3_4_3" id="__nav_3_4_3_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_3_4_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_4_3">
            <span class="md-nav__icon md-icon"></span>
            Set up your experiment
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../behaviour/experimental-setup/pavlovia-jspsych.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Online Experiments (jsPsych)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../behaviour/experimental-setup/pavlovia-psychopy.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Online Experiments (PsychoPy)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../behaviour/experimental-setup/bh-onsite.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    On-site Experiments
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../behaviour/bh-tasks.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Behavioural tasks
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_5" checked>
        
          
          <div class="md-nav__link md-nav__container">
            <a href="index.html" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    fMRI
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_3_5" id="__nav_3_5_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_5_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3_5">
            <span class="md-nav__icon md-icon"></span>
            fMRI
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="fmri-get-started.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    First steps
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="fmri-procedure.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Scanning procedure and info
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_5_4" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="analysis/index.html" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Analysis workflow
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_3_5_4" id="__nav_3_5_4_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_3_5_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_5_4">
            <span class="md-nav__icon md-icon"></span>
            Analysis workflow
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="analysis/fmri-general.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    0. General information
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="analysis/fmri-setup-env.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    1. Set-up you environment
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="analysis/fmri-bids-conversion.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    2. BIDS conversion
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="analysis/fmri-prepocessing-qa.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    3. Pre-processing and QA
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="analysis/fmri-glm.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    4a. First-level analysis - GUI
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="analysis/fmri-glm-script.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    4b. First-level analysis - Scripting
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="analysis/fmri-rois.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    5. Regions of interest
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="analysis/fmri-mvpa.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    6. Multi-variate analysis
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="analysis/fmri-andrea-workflow.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    fMRI workflow example
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="fmri-nimare.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Meta-analysis with NiMARE
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    fMRIprep on HPC
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="fmri-hpc.html" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    fMRIprep on HPC
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#1-prerequisites" class="md-nav__link">
    <span class="md-ellipsis">
      1. Prerequisites
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2-connecting-to-the-cluster" class="md-nav__link">
    <span class="md-ellipsis">
      2. Connecting to the Cluster
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#3-data-management-on-the-hpc" class="md-nav__link">
    <span class="md-ellipsis">
      3. Data Management on the HPC
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#4-transferring-data-to-the-hpc" class="md-nav__link">
    <span class="md-ellipsis">
      4. Transferring Data to the HPC
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#5-building-an-fmriprep-singularity-container" class="md-nav__link">
    <span class="md-ellipsis">
      5. Building an fMRIPrep Singularity Container
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#6-submitting-and-running-an-fmriprep-job-with-slurm" class="md-nav__link">
    <span class="md-ellipsis">
      6. Submitting and Running an fMRIPrep Job with Slurm
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#7-monitoring-your-job" class="md-nav__link">
    <span class="md-ellipsis">
      7. Monitoring Your Job
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#8-canceling-a-job" class="md-nav__link">
    <span class="md-ellipsis">
      8 Canceling a Job
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#9-after-the-job-completes" class="md-nav__link">
    <span class="md-ellipsis">
      9. After the Job Completes
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#10-advanced-monitoring-resource-usage" class="md-nav__link">
    <span class="md-ellipsis">
      10. Advanced: Monitoring Resource Usage
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#11-references-and-links" class="md-nav__link">
    <span class="md-ellipsis">
      11. References and Links
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_6" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../eeg/index.html" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    EEG
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_3_6" id="__nav_3_6_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_6">
            <span class="md-nav__icon md-icon"></span>
            EEG
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../eeg/eeg-acquisition.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Data acquisition
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_7" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../dnn/index.html" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Neural Networks
    
  </span>
  

            </a>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_7">
            <span class="md-nav__icon md-icon"></span>
            Neural Networks
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../outreach.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Science outreach
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../contribute.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Contribute
    
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#1-prerequisites" class="md-nav__link">
    <span class="md-ellipsis">
      1. Prerequisites
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2-connecting-to-the-cluster" class="md-nav__link">
    <span class="md-ellipsis">
      2. Connecting to the Cluster
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#3-data-management-on-the-hpc" class="md-nav__link">
    <span class="md-ellipsis">
      3. Data Management on the HPC
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#4-transferring-data-to-the-hpc" class="md-nav__link">
    <span class="md-ellipsis">
      4. Transferring Data to the HPC
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#5-building-an-fmriprep-singularity-container" class="md-nav__link">
    <span class="md-ellipsis">
      5. Building an fMRIPrep Singularity Container
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#6-submitting-and-running-an-fmriprep-job-with-slurm" class="md-nav__link">
    <span class="md-ellipsis">
      6. Submitting and Running an fMRIPrep Job with Slurm
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#7-monitoring-your-job" class="md-nav__link">
    <span class="md-ellipsis">
      7. Monitoring Your Job
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#8-canceling-a-job" class="md-nav__link">
    <span class="md-ellipsis">
      8 Canceling a Job
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#9-after-the-job-completes" class="md-nav__link">
    <span class="md-ellipsis">
      9. After the Job Completes
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#10-advanced-monitoring-resource-usage" class="md-nav__link">
    <span class="md-ellipsis">
      10. Advanced: Monitoring Resource Usage
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#11-references-and-links" class="md-nav__link">
    <span class="md-ellipsis">
      11. References and Links
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  
    <a href="https://github.com/HOPLAB-LBP/hoplab-wiki/edit/main/docs/research/fmri/fmri-hpc.md" title="Edit this page" class="md-content__button md-icon" rel="edit">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10 20H6V4h7v5h5v3.1l2-2V8l-6-6H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h4zm10.2-7c.1 0 .3.1.4.2l1.3 1.3c.2.2.2.6 0 .8l-1 1-2.1-2.1 1-1c.1-.1.2-.2.4-.2m0 3.9L14.1 23H12v-2.1l6.1-6.1z"/></svg>
    </a>
  
  


<h1 id="ku-leuven-hpc-getting-started">KU Leuven HPC: Getting Started<a class="headerlink" href="#ku-leuven-hpc-getting-started" title="Permanent link">&para;</a></h1>
<p>This guide describes how to connect to the KU Leuven/VSC HPC cluster, manage your data, and run <code>fMRIPrep</code>.</p>
<hr />
<div class="admonition warning">
<p class="admonition-title">Login Node</p>
<p>When you connect via SSH, you land on a <em>login node</em>. Do <em>not</em> run compute-intensive tasks here, because login nodes are shared among tens of users. Submit jobs to the <em>compute</em> (<em>CPU</em> or <em>GPU</em>) nodes via Slurm.</p>
</div>
<div class="admonition tip">
<p class="admonition-title">Change directory after login</p>
<p>After a login, you land on your home directory <code>$VSC_HOME</code> which has only 3GB quota (by design).
This small volume is easy to fill up by mistake; hence, it is recommended to always change the working directory after login
to your <code>$VSC_DATA</code> (75 GB) or to your <code>$VSC_SCRATCH</code> (500 GB) upon login, e.g.:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="nb">cd</span><span class="w"> </span><span class="nv">$VSC_DATA</span>
</span></code></pre></div>
<p>This ensures you work in a directory with persistent storage (your files are not deleted) and sufficient disk space.
Beware that any files in your scratch folder which is not accessed for 30 days will be automatically deleted, and scratch
folder (as the name proposes) has no backup.</p>
</div>
<hr />
<p>VSC offers a <a href="https://docs.vscentrum.be/">full documentation</a> of all the services, but in case of question of problems, you 
may contact the <a href="https://docs.vscentrum.be/contact_vsc.html">local support team at KU Leuven</a>.</p>
<h2 id="1-prerequisites">1. Prerequisites<a class="headerlink" href="#1-prerequisites" title="Permanent link">&para;</a></h2>
<ol>
<li>You have a valid VSC account (e.g., <code>vsc12345</code>). Request one <a href="https://vlaams-supercomputing-centrum-vscdocumentation.readthedocs-hosted.com/en/latest/index.html">here</a>.</li>
<li>For Windows users, install MobaXterm (SSH client) and FileZilla or WinSCP for file transfer;
   for Mac/Linux users, it is sufficient to use the terminal (has built-in SSH) and FileZilla for file transfer.</li>
<li>You have logged into the <a href="https://firewall.vscentrum.be/auth/login">HPC firewall</a> before attempting SSH.</li>
<li>You have requested introductory credits (2 million credits for 6 months) via <a href="https://admin.kuleuven.be/icts/onderzoek/hpc/request-introduction-credits">this form</a>.</li>
</ol>
<hr />
<h2 id="2-connecting-to-the-cluster">2. Connecting to the Cluster<a class="headerlink" href="#2-connecting-to-the-cluster" title="Permanent link">&para;</a></h2>
<p>Once your account is active, you may follow <a href="https://docs.vscentrum.be/accounts/mfa_login.html">these steps</a> to login through Multi-Factor Authentication (MFA) depending on your choice of OS. The two main options are:</p>
<ul>
<li><strong>KU Leuven OnDemand</strong>: a browser-based graphical interface. Follow the instructions in <em>Login to Open OnDemand</em>. Once logged in, you will see a dashboard with options to launch interactive sessions, submit jobs, and manage files. Navigate to the terminal interface by clicking the <em>Login Server Shell Access</em> button.</li>
<li><strong>SSH-based login</strong>: a terminal-based interface. Follow the instructions in <em>Connecting with an SSH agent</em>. Here, you connect to the cluster by directly opening the terminal interface on your local machine, using the Terminal, Powershell or whichever shell program.</li>
</ul>
<p>After a successful login, you will see something like:</p>
<p><img alt="VSC Login" src="../../assets/fmri-hpc-login.png" /></p>
<p>Look at the last line:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-1-1"><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a>✔<span class="w"> </span><span class="o">[</span>Apr/15<span class="w"> </span><span class="m">15</span>:13<span class="o">]</span><span class="w"> </span>vsc12345@tier2-p-login-1<span class="w"> </span>~<span class="w"> </span>$<span class="w"> </span>
</span></code></pre></div>
<p>which suggests we are connected to the login node <code>tier2-p-login-1</code> as <code>vsc12345</code> (your VSC username). From now on, what we type in the terminal will be executed on the login node. Note that the login nodes are only meant to move your data around, submit and monitor your jobs, and write/edit your scripts. For all other purposes (actual computation, pre-/post-processing and software installation), you have to start an 
<a href="https://docs.vscentrum.be/compute/jobs/running_jobs.html">interactive or batch job using Slurm</a>.</p>
<p>To exit the ssh session and go back to your local terminal, type <code>exit</code>.</p>
<hr />
<h2 id="3-data-management-on-the-hpc">3. Data Management on the HPC<a class="headerlink" href="#3-data-management-on-the-hpc" title="Permanent link">&para;</a></h2>
<h3 id="31-structuring-your-data">3.1. Structuring your data<a class="headerlink" href="#31-structuring-your-data" title="Permanent link">&para;</a></h3>
<p>Your VSC account comes equipped with several folders, each with different characteristics. When logging in, you automatically land in your home directory, which is located at <code>/user/leuven/123/vsc12345</code>. This path is stored in the variable <code>VSC_HOME</code>, which you check by typing <code>echo $VSC_HOME</code> in the terminal. Likewise, other important directories are stored in variables names. To navigate quickly to any of these directories, you can use the <code>cd</code> command followed by the variable name, e.g., <code>cd $VSC_DATA</code> to move to your data directory.</p>
<p><strong>Folder Structure:</strong></p>
<ul>
<li><code>VSC_HOME</code>: Small quota, do <em>not</em> use it at all.</li>
<li><code>VSC_DATA</code>: Persistent but slow, larger capacity. Store big data, installed packages (e.g., Miniforge/Miniconda), and your project files.
  All files and folders in your data directory are snapshoted, so you can recover them if you delete them by mistake.
  For that purpose, look inside the <code>.snapshot</code> directory inside any folder in your data directory for available snapshot timestamps.</li>
<li><code>VSC_SCRATCH</code>: Temporary storage but fast I/O. Files here will be deleted if not accessed after 30 days. Do not store your project data here!</li>
<li><code>VSC_SCRATCH_NODE</code>: Temporary storage available on the compute node which can be only used when your job is running on a compute node.</li>
</ul>
<p>A typical approach is to keep a dedicated subdirectory in <code>VSC_DATA</code> for each project. For example:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-2-1"><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a>VSC_DATA<span class="w">                    </span><span class="c1"># Persistent storage</span>
</span><span id="__span-2-2"><a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a>├──<span class="w"> </span>fmri<span class="w">                    </span><span class="c1"># Place to store fMRI data</span>
</span><span id="__span-2-3"><a id="__codelineno-2-3" name="__codelineno-2-3" href="#__codelineno-2-3"></a><span class="w">    </span>├──<span class="w"> </span>myproject<span class="w">           </span><span class="c1"># project-specific folder</span>
</span><span id="__span-2-4"><a id="__codelineno-2-4" name="__codelineno-2-4" href="#__codelineno-2-4"></a><span class="w">    </span>│<span class="w">   </span>├──<span class="w"> </span>BIDS<span class="w">                </span><span class="c1"># BIDS dataset</span>
</span><span id="__span-2-5"><a id="__codelineno-2-5" name="__codelineno-2-5" href="#__codelineno-2-5"></a><span class="w">    </span>│<span class="w">   </span>│<span class="w">   </span>├──<span class="w"> </span>derivatives<span class="w">     </span><span class="c1"># Derivatives</span>
</span><span id="__span-2-6"><a id="__codelineno-2-6" name="__codelineno-2-6" href="#__codelineno-2-6"></a><span class="w">    </span>│<span class="w">   </span>│<span class="w">   </span>└──<span class="w"> </span>sub-01<span class="w">          </span><span class="c1"># Subject data</span>
</span><span id="__span-2-7"><a id="__codelineno-2-7" name="__codelineno-2-7" href="#__codelineno-2-7"></a><span class="w">    </span>│<span class="w">   </span>│<span class="w">       </span>├──<span class="w"> </span>anat<span class="w">  </span>
</span><span id="__span-2-8"><a id="__codelineno-2-8" name="__codelineno-2-8" href="#__codelineno-2-8"></a><span class="w">    </span>│<span class="w">   </span>│<span class="w">       </span>└──<span class="w"> </span>func<span class="w">  </span>
</span><span id="__span-2-9"><a id="__codelineno-2-9" name="__codelineno-2-9" href="#__codelineno-2-9"></a><span class="w">    </span>│<span class="w">   </span>├──<span class="w"> </span>license.txt<span class="w">         </span><span class="c1"># FreeSurfer license file  </span>
</span><span id="__span-2-10"><a id="__codelineno-2-10" name="__codelineno-2-10" href="#__codelineno-2-10"></a><span class="w">    </span>│<span class="w">   </span>└──<span class="w"> </span>sourcedata<span class="w">          </span><span class="c1"># Raw data</span>
</span><span id="__span-2-11"><a id="__codelineno-2-11" name="__codelineno-2-11" href="#__codelineno-2-11"></a><span class="w">    </span>│<span class="w">       </span>└──<span class="w"> </span>DICOM<span class="w">           </span>
</span><span id="__span-2-12"><a id="__codelineno-2-12" name="__codelineno-2-12" href="#__codelineno-2-12"></a><span class="w">    </span>│<span class="w">           </span>└──<span class="w"> </span>sub-01<span class="w">      </span>
</span><span id="__span-2-13"><a id="__codelineno-2-13" name="__codelineno-2-13" href="#__codelineno-2-13"></a><span class="w">    </span>└──<span class="w"> </span>fmriprep-25.0.0.sif<span class="w">     </span><span class="c1"># Singularity container</span>
</span></code></pre></div>
<h3 id="32-managing-storage-usage">3.2. Managing storage usage<a class="headerlink" href="#32-managing-storage-usage" title="Permanent link">&para;</a></h3>
<p>Operations like fMRIPrep can generate large amounts of data, so it is important to manage your data effectively. You can find some general advice on the <a href="https://docs.vscentrum.be/data/managing_storage_usage.html">VSC documentation</a>.</p>
<p>If your HPC storage is full, you might encounter this type of error when sending data to the compute node:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-3-1"><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a>rsync:<span class="w"> </span>writefd_unbuffered<span class="w"> </span>failed<span class="w"> </span>to<span class="w"> </span>write<span class="w"> </span><span class="m">32768</span><span class="w"> </span>bytes<span class="w"> </span><span class="o">[</span>sender<span class="o">]</span>:<span class="w"> </span>Broken<span class="w"> </span>pipe<span class="w"> </span><span class="o">(</span>...<span class="o">)</span>
</span><span id="__span-3-2"><a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a>rsync:<span class="w"> </span>connection<span class="w"> </span>unexpectedly<span class="w"> </span>closed<span class="w"> </span><span class="o">(</span>...<span class="w"> </span>bytes<span class="w"> </span>received<span class="w"> </span>so<span class="w"> </span>far<span class="o">)</span><span class="w"> </span><span class="o">[</span>sender<span class="o">]</span>
</span><span id="__span-3-3"><a id="__codelineno-3-3" name="__codelineno-3-3" href="#__codelineno-3-3"></a>rsync<span class="w"> </span>error:<span class="w"> </span>error<span class="w"> </span><span class="k">in</span><span class="w"> </span>rsync<span class="w"> </span>protocol<span class="w"> </span>data<span class="w"> </span>stream<span class="w"> </span><span class="o">(</span>code<span class="w"> </span><span class="m">12</span><span class="o">)</span><span class="w"> </span>at<span class="w"> </span>...
</span></code></pre></div>
<p>When encountering this or other similar errors, you should check your storage usage. Use the following command:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-4-1"><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a>myquota
</span></code></pre></div>
<p>To see, directory by directory, how much space you are using. This command will also show you which directories might be exceeding their quota. You can also check the size of a specific directory, for example, your data directory:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-5-1"><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a>du<span class="w"> </span>-h<span class="w"> </span><span class="nv">$VSC_DATA</span>
</span></code></pre></div>
<p>Where <code>-h</code> means "human-readable" (e.g., in GB or MB, add <code>-s</code> - "summary" for the total size).</p>
<p>If you find your storage full, it is a good idea to <strong>clean up</strong> the files you won't need anymore, as well as the data you've already downloaded locally. In general, it is best not to consider the HPC as a long-term storage solution.</p>
<hr />
<h2 id="4-transferring-data-to-the-hpc">4. Transferring Data to the HPC<a class="headerlink" href="#4-transferring-data-to-the-hpc" title="Permanent link">&para;</a></h2>
<p>Once connected to the cluster, you’ll need to transfer your BIDS dataset, FreeSurfer license, and other relevant files to your <code>VSC_DATA</code> directory on the HPC system.</p>
<div class="tabbed-set tabbed-alternate" data-tabs="1:2"><input checked="checked" id="windows-winscp" name="__tabbed_1" type="radio" /><input id="linux--macos" name="__tabbed_1" type="radio" /><div class="tabbed-labels"><label for="windows-winscp">Windows (WinSCP)</label><label for="linux--macos">Linux / macOS</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<ol>
<li>
<p><a href="https://firewall.vscentrum.be/auth/login"><strong>Login</strong></a> through the firewall.</p>
</li>
<li>
<p><strong>Open WinSCP:</strong></p>
<ul>
<li>Host Name: <code>login.hpc.kuleuven.be</code></li>
<li>User Name: <code>vsc12345</code></li>
<li>Load your private key if needed.</li>
</ul>
</li>
<li>
<p><strong>Transfer Files:</strong></p>
<ul>
<li>Navigate to <code>/data/leuven/123/vsc12345/data/</code> on the remote side.</li>
<li>Drag and drop or copy/paste files from your local machine.</li>
<li>To avoid overwriting existing files, make sure to only add new content, or configure WinSCP to skip duplicates.</li>
</ul>
</li>
</ol>
</div>
<div class="tabbed-block">
<ol>
<li><a href="https://firewall.vscentrum.be/auth/login"><strong>Login</strong></a> through the firewall.</li>
</ol>
<p>2a. Basic <code>scp</code> (secure copy):
<div class="language-bash highlight"><pre><span></span><code><span id="__span-6-1"><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a>scp<span class="w"> </span>-r<span class="w"> </span>/local/path/BIDS<span class="w"> </span><span class="se">\</span>
</span><span id="__span-6-2"><a id="__codelineno-6-2" name="__codelineno-6-2" href="#__codelineno-6-2"></a>vsc12345@login.hpc.kuleuven.be:/data/leuven/123/vsc12345/data/BIDS
</span></code></pre></div></p>
<ul>
<li><code>-r</code> copies directories recursively.</li>
</ul>
<p>2b. Merging folders with <code>rsync</code> (recommended):</p>
<p>Use <code>rsync</code> to avoid overwriting existing files:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-7-1"><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a>rsync<span class="w"> </span>-av<span class="w"> </span>--ignore-existing<span class="w"> </span>/local/path/BIDS<span class="w"> </span><span class="se">\</span>
</span><span id="__span-7-2"><a id="__codelineno-7-2" name="__codelineno-7-2" href="#__codelineno-7-2"></a>vsc12345@login.hpc.kuleuven.be:/data/leuven/123/vsc12345/data/
</span></code></pre></div>
<ul>
<li><code>-a</code> preserves file attributes.</li>
<li><code>-v</code> enables verbose output.</li>
<li><code>--ignore-existing</code> skips files already present on the remote server.</li>
</ul>
</div>
</div>
</div>
<p>Make sure you replace <code>/local/path/BIDS</code> with your local BIDS folder, and <code>vsc12345</code> and <code>123</code> with your actual VSC username and the first 3 digits of your ID.</p>
<hr />
<h2 id="5-building-an-fmriprep-singularity-container">5. Building an <code>fMRIPrep</code> Singularity Container<a class="headerlink" href="#5-building-an-fmriprep-singularity-container" title="Permanent link">&para;</a></h2>
<ol>
<li><strong>Move to <code>VSC_DATA</code>:</strong></li>
</ol>
<div class="language-text highlight"><pre><span></span><code><span id="__span-8-1"><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a>cd $VSC_DATA
</span></code></pre></div>
<ol>
<li><strong>Build the Container:</strong></li>
</ol>
<div class="language-text highlight"><pre><span></span><code><span id="__span-9-1"><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a>singularity build fmriprep-25.0.0.sif docker://nipreps/fmriprep:25.0.0
</span></code></pre></div>
<p>This fetches the Docker image and converts it to a Singularity <code>.sif</code> image.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Ensure you have enough quota and that you are not attempting this in <code>VSC_HOME</code>!</p>
</div>
<hr />
<h2 id="6-submitting-and-running-an-fmriprep-job-with-slurm">6. Submitting and Running an <code>fMRIPrep</code> Job with Slurm<a class="headerlink" href="#6-submitting-and-running-an-fmriprep-job-with-slurm" title="Permanent link">&para;</a></h2>
<h3 id="61-creating-a-slurm-jobscript">6.1. Creating a Slurm Jobscript<a class="headerlink" href="#61-creating-a-slurm-jobscript" title="Permanent link">&para;</a></h3>
<p>To submit our job to the compute node, we will need to create a Slurm script. This script will define the job resources, dependencies, and all the steps needed to complete the workflow. Then, submit the jobscript to the cluster using the <code>sbatch</code> command. Your batch job will run remotely on a compute node, and <code>fmriprep</code> will be executed from within a container.</p>
<p>To create such file, type in your ssh session:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-10-1"><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a><span class="nb">cd</span><span class="w"> </span><span class="nv">$VSC_DATA</span>
</span><span id="__span-10-2"><a id="__codelineno-10-2" name="__codelineno-10-2" href="#__codelineno-10-2"></a>nano<span class="w"> </span>run_fmriprep_job.slurm
</span></code></pre></div>
<p>This will open a text editor. Use the following template as a guideline, but change relevant fields (such as job name, account name etc) accordingly:</p>
<p><div class="language-text highlight"><pre><span></span><code><span id="__span-11-1"><a id="__codelineno-11-1" name="__codelineno-11-1" href="#__codelineno-11-1"></a>#!/bin/bash -l
</span><span id="__span-11-2"><a id="__codelineno-11-2" name="__codelineno-11-2" href="#__codelineno-11-2"></a>#SBATCH --account=intro_vsc12345
</span><span id="__span-11-3"><a id="__codelineno-11-3" name="__codelineno-11-3" href="#__codelineno-11-3"></a>#SBATCH --cluster=genius
</span><span id="__span-11-4"><a id="__codelineno-11-4" name="__codelineno-11-4" href="#__codelineno-11-4"></a>#SBATCH --partition=batch
</span><span id="__span-11-5"><a id="__codelineno-11-5" name="__codelineno-11-5" href="#__codelineno-11-5"></a>#SBATCH --ntasks=1
</span><span id="__span-11-6"><a id="__codelineno-11-6" name="__codelineno-11-6" href="#__codelineno-11-6"></a>#SBATCH --cpus-per-task=16
</span><span id="__span-11-7"><a id="__codelineno-11-7" name="__codelineno-11-7" href="#__codelineno-11-7"></a>#SBATCH --mem=20G
</span><span id="__span-11-8"><a id="__codelineno-11-8" name="__codelineno-11-8" href="#__codelineno-11-8"></a>#SBATCH --time=08:00:00
</span><span id="__span-11-9"><a id="__codelineno-11-9" name="__codelineno-11-9" href="#__codelineno-11-9"></a>#SBATCH --job-name=fmriprep_sub-42
</span><span id="__span-11-10"><a id="__codelineno-11-10" name="__codelineno-11-10" href="#__codelineno-11-10"></a>#SBATCH --output=slurm-%j.out
</span><span id="__span-11-11"><a id="__codelineno-11-11" name="__codelineno-11-11" href="#__codelineno-11-11"></a>#SBATCH --error=slurm-%j.err
</span><span id="__span-11-12"><a id="__codelineno-11-12" name="__codelineno-11-12" href="#__codelineno-11-12"></a>#SBATCH --mail-type=END,FAIL
</span><span id="__span-11-13"><a id="__codelineno-11-13" name="__codelineno-11-13" href="#__codelineno-11-13"></a>#SBATCH --mail-user=your.email@kuleuven.be
</span><span id="__span-11-14"><a id="__codelineno-11-14" name="__codelineno-11-14" href="#__codelineno-11-14"></a>
</span><span id="__span-11-15"><a id="__codelineno-11-15" name="__codelineno-11-15" href="#__codelineno-11-15"></a># Move to the data directory
</span><span id="__span-11-16"><a id="__codelineno-11-16" name="__codelineno-11-16" href="#__codelineno-11-16"></a>cd $VSC_DATA/data
</span><span id="__span-11-17"><a id="__codelineno-11-17" name="__codelineno-11-17" href="#__codelineno-11-17"></a>
</span><span id="__span-11-18"><a id="__codelineno-11-18" name="__codelineno-11-18" href="#__codelineno-11-18"></a># Run fMRIPrep with Singularity
</span><span id="__span-11-19"><a id="__codelineno-11-19" name="__codelineno-11-19" href="#__codelineno-11-19"></a>singularity run --cleanenv \
</span><span id="__span-11-20"><a id="__codelineno-11-20" name="__codelineno-11-20" href="#__codelineno-11-20"></a>  -B $VSC_DATA/data/BIDS:/data:ro \
</span><span id="__span-11-21"><a id="__codelineno-11-21" name="__codelineno-11-21" href="#__codelineno-11-21"></a>  -B $VSC_DATA/data/BIDS/derivatives:/out \
</span><span id="__span-11-22"><a id="__codelineno-11-22" name="__codelineno-11-22" href="#__codelineno-11-22"></a>  -B $VSC_SCRATCH/fmriprep_tmp:/scratch \
</span><span id="__span-11-23"><a id="__codelineno-11-23" name="__codelineno-11-23" href="#__codelineno-11-23"></a>  -B $VSC_DATA/data/license.txt:/opt/freesurfer/license.txt \
</span><span id="__span-11-24"><a id="__codelineno-11-24" name="__codelineno-11-24" href="#__codelineno-11-24"></a>  $VSC_DATA/fmriprep-25.0.0.sif \
</span><span id="__span-11-25"><a id="__codelineno-11-25" name="__codelineno-11-25" href="#__codelineno-11-25"></a>  /data /out/fmriprep participant \
</span><span id="__span-11-26"><a id="__codelineno-11-26" name="__codelineno-11-26" href="#__codelineno-11-26"></a>  --participant-label 42 \
</span><span id="__span-11-27"><a id="__codelineno-11-27" name="__codelineno-11-27" href="#__codelineno-11-27"></a>  --skip-bids-validation \
</span><span id="__span-11-28"><a id="__codelineno-11-28" name="__codelineno-11-28" href="#__codelineno-11-28"></a>  --output-spaces MNI152NLin2009cAsym:res-2 fsaverage \
</span><span id="__span-11-29"><a id="__codelineno-11-29" name="__codelineno-11-29" href="#__codelineno-11-29"></a>  --work-dir /scratch \
</span><span id="__span-11-30"><a id="__codelineno-11-30" name="__codelineno-11-30" href="#__codelineno-11-30"></a>  --bold2anat-dof 9 \
</span><span id="__span-11-31"><a id="__codelineno-11-31" name="__codelineno-11-31" href="#__codelineno-11-31"></a>  --nthreads 16 --omp-nthreads 16 \
</span><span id="__span-11-32"><a id="__codelineno-11-32" name="__codelineno-11-32" href="#__codelineno-11-32"></a>  --mem-mb 20000 \
</span><span id="__span-11-33"><a id="__codelineno-11-33" name="__codelineno-11-33" href="#__codelineno-11-33"></a>  --clean-workdir
</span></code></pre></div>
Then press <code>CTRL+X</code> to exit and <code>Y</code> to save. Check whether your file was saved correctly:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-12-1"><a id="__codelineno-12-1" name="__codelineno-12-1" href="#__codelineno-12-1"></a>ls<span class="w"> </span><span class="nv">$VSC_DATA</span>
</span></code></pre></div>
<p>which should return:</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-13-1"><a id="__codelineno-13-1" name="__codelineno-13-1" href="#__codelineno-13-1"></a>fmriprep-25.0.0.sif  data  license.txt  run_fmriprep_job.slurm
</span></code></pre></div>
<h3 id="62-submitting-the-job">6.2 Submitting the Job<a class="headerlink" href="#62-submitting-the-job" title="Permanent link">&para;</a></h3>
<ol>
<li>
<p>Navigate to the same directory as your script (or specify the full path):</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-14-1"><a id="__codelineno-14-1" name="__codelineno-14-1" href="#__codelineno-14-1"></a><span class="nb">cd</span><span class="w"> </span><span class="nv">$VSC_DATA</span>
</span></code></pre></div>
</li>
<li>
<p>Submit:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-15-1"><a id="__codelineno-15-1" name="__codelineno-15-1" href="#__codelineno-15-1"></a>sbatch<span class="w"> </span>run_fmriprep_job.slurm
</span></code></pre></div>
<p>A message appears:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-16-1"><a id="__codelineno-16-1" name="__codelineno-16-1" href="#__codelineno-16-1"></a>Submitted<span class="w"> </span>batch<span class="w"> </span>job<span class="w"> </span><span class="m">58070026</span>
</span></code></pre></div>
</li>
</ol>
<p><em>where <code>58070026</code> is your job ID</em> (but it will be different in your case).</p>
<ol>
<li>
<p>Check the status of your job:</p>
<p>Through the <strong>terminal</strong>, you can check the status of your job by running:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-17-1"><a id="__codelineno-17-1" name="__codelineno-17-1" href="#__codelineno-17-1"></a>squeue<span class="w"> </span>-j<span class="w"> </span><span class="m">58070026</span>
</span></code></pre></div>
<p>Which returns:</p>
<p><div class="language-bash highlight"><pre><span></span><code><span id="__span-18-1"><a id="__codelineno-18-1" name="__codelineno-18-1" href="#__codelineno-18-1"></a>JOBID<span class="w"> </span>PARTITION<span class="w">     </span>NAME<span class="w">     </span>USER<span class="w"> </span>ST<span class="w">       </span>TIME<span class="w">  </span>NODES<span class="w"> </span>NODELIST<span class="o">(</span>REASON<span class="o">)</span>
</span><span id="__span-18-2"><a id="__codelineno-18-2" name="__codelineno-18-2" href="#__codelineno-18-2"></a><span class="m">58070026</span><span class="w"> </span>batch<span class="w">     </span>fmriprep<span class="w"> </span>vsc12345<span class="w">  </span>R<span class="w">       </span><span class="m">0</span>:00<span class="w">      </span><span class="m">1</span><span class="w"> </span><span class="o">(</span>Priority<span class="o">)</span>
</span></code></pre></div>
Through the KU Leuven <strong>OnDemand</strong> interface, you can also check the status of your job by clicking on the <em>Active jobs</em> tab in the dashboard.</p>
</li>
</ol>
<p>Congrats! Your job is now being executed on the cluster.</p>
<div class="admonition tip">
<p class="admonition-title">Runtime</p>
<p>Your runtime depends critically on various factors, such as the choice of hardware, the number of threads used, the amount of memory used, and your I/O pattern. You may choose one of the <code>batch_*</code> partitions from either of Genius or wICE clusters to find the most performant hardware for your workflow. Detailed information about avaialble hardware can be found on <a href="https://docs.vscentrum.be/leuven/tier2_hardware.html">Ku Leuven Tier-2 specifications</a>.</p>
<p>From a first test on the call above (which includes the FreeSurfer workflow) on a subjects with one anatomical image and two functional scans:</p>
<ul>
<li><strong>32 cores</strong> and <strong>50GB of RAM</strong> end up in a runtime of <code>03:41:05</code> </li>
<li><strong>16 cores</strong> and <strong>20GB of RAM</strong> end up in a runtime of <code>03:59:27</code> on the same subjects</li>
</ul>
</div>
<h3 id="63-slurm-basics-you-will-need">6.3 SLURM Basics you will need<a class="headerlink" href="#63-slurm-basics-you-will-need" title="Permanent link">&para;</a></h3>
<ul>
<li><code>sbatch</code>: Submits a jobscript to the cluster.</li>
<li><code>srun</code>: Start an interactive session on a compute node.</li>
<li><code>squeue -M genius,wice</code>: Shows your jobs on both clusters.</li>
<li><code>scancel -M &lt;cluster&gt; &lt;jobID&gt;</code>: Cancels a job with the <code>&lt;jobID&gt;</code> running on <code>&lt;cluster&gt;</code>.</li>
<li><code>sstat</code>: Real-time CPU/memory info on running jobs.</li>
<li><code>sacct</code>: Shows CPU time, wall time, memory usage, and exit codes for <em>finished</em> jobs.</li>
</ul>
<hr />
<h2 id="7-monitoring-your-job">7. Monitoring Your Job<a class="headerlink" href="#7-monitoring-your-job" title="Permanent link">&para;</a></h2>
<h3 id="71-job-queue">7.1 Job Queue<a class="headerlink" href="#71-job-queue" title="Permanent link">&para;</a></h3>
<p>Check the status of your running or pending jobs:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-19-1"><a id="__codelineno-19-1" name="__codelineno-19-1" href="#__codelineno-19-1"></a>squeue<span class="w"> </span>-M<span class="w"> </span>genius,wice<span class="w"> </span>-u<span class="w"> </span><span class="nv">$USER</span>
</span></code></pre></div>
<p>which returns:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-20-1"><a id="__codelineno-20-1" name="__codelineno-20-1" href="#__codelineno-20-1"></a>$<span class="w"> </span>squeue<span class="w"> </span>-M<span class="w"> </span>genius,wice<span class="w"> </span>-u<span class="w"> </span><span class="nv">$USER</span>
</span><span id="__span-20-2"><a id="__codelineno-20-2" name="__codelineno-20-2" href="#__codelineno-20-2"></a>CLUSTER:<span class="w"> </span>genius
</span><span id="__span-20-3"><a id="__codelineno-20-3" name="__codelineno-20-3" href="#__codelineno-20-3"></a><span class="w">             </span>JOBID<span class="w"> </span>PARTITION<span class="w">     </span>NAME<span class="w">     </span>USER<span class="w"> </span>ST<span class="w">       </span>TIME<span class="w">  </span>NODES<span class="w"> </span>NODELIST<span class="o">(</span>REASON<span class="o">)</span>
</span><span id="__span-20-4"><a id="__codelineno-20-4" name="__codelineno-20-4" href="#__codelineno-20-4"></a><span class="w">          </span><span class="m">58070026</span><span class="w">     </span>batch<span class="w"> </span>fmriprep<span class="w"> </span>vsc12345<span class="w">  </span>R<span class="w">    </span><span class="m">2</span>:25:57<span class="w">      </span><span class="m">1</span><span class="w"> </span>r27i27n19
</span><span id="__span-20-5"><a id="__codelineno-20-5" name="__codelineno-20-5" href="#__codelineno-20-5"></a>
</span><span id="__span-20-6"><a id="__codelineno-20-6" name="__codelineno-20-6" href="#__codelineno-20-6"></a>CLUSTER:<span class="w"> </span>wice
</span><span id="__span-20-7"><a id="__codelineno-20-7" name="__codelineno-20-7" href="#__codelineno-20-7"></a><span class="w">             </span>JOBID<span class="w"> </span>PARTITION<span class="w">     </span>NAME<span class="w">     </span>USER<span class="w"> </span>ST<span class="w">       </span>TIME<span class="w">  </span>NODES<span class="w"> </span>NODELIST<span class="o">(</span>REASON<span class="o">)</span>
</span></code></pre></div>
<ul>
<li><code>R</code> means running, <code>PD</code> means pending.  </li>
<li><code>NODELIST</code> shows the node(s) assigned. If it shows <code>(Priority)</code>, you`re still waiting.</li>
</ul>
<h3 id="72-checking-logs">7.2 Checking Logs<a class="headerlink" href="#72-checking-logs" title="Permanent link">&para;</a></h3>
<p>When you submit a Slurm job, two log files are automatically generated in the directory where you ran <code>sbatch</code>:</p>
<ul>
<li><code>slurm-&lt;jobid&gt;.out</code>: captures <strong>standard output (stdout)</strong> — the regular printed output from your script.</li>
<li><code>slurm-&lt;jobid&gt;.err</code>: captures <strong>standard error (stderr)</strong> — any warnings or errors encountered during the job.</li>
</ul>
<h4 id="check-available-files">Check Available Files<a class="headerlink" href="#check-available-files" title="Permanent link">&para;</a></h4>
<p>To see the files in your current directory:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-21-1"><a id="__codelineno-21-1" name="__codelineno-21-1" href="#__codelineno-21-1"></a>ls
</span></code></pre></div>
<p>You should see something like:</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-22-1"><a id="__codelineno-22-1" name="__codelineno-22-1" href="#__codelineno-22-1"></a>fmriprep-25.0.0.sif  data  run_fmriprep_job.slurm  slurm-58070026.out  slurm-58070026.err
</span></code></pre></div>
<h4 id="open-and-read-the-logs">Open and Read the Logs<a class="headerlink" href="#open-and-read-the-logs" title="Permanent link">&para;</a></h4>
<p>To open the full output log (static view):</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-23-1"><a id="__codelineno-23-1" name="__codelineno-23-1" href="#__codelineno-23-1"></a>nano<span class="w"> </span>slurm-58070026.out
</span></code></pre></div>
<p>To close <code>nano</code>, press <code>Ctrl+X</code> → then <code>N</code> if prompted to save changes.</p>
<p>To view just the last few lines of the file:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-24-1"><a id="__codelineno-24-1" name="__codelineno-24-1" href="#__codelineno-24-1"></a>tail<span class="w"> </span>-n<span class="w"> </span><span class="m">30</span><span class="w"> </span>slurm-58070026.out
</span></code></pre></div>
<p>This prints the last 30 lines of the file — useful to check progress without opening the full log.</p>
<p>To <strong>continuously monitor</strong> the last lines in real time (refreshes every 1 second):</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-25-1"><a id="__codelineno-25-1" name="__codelineno-25-1" href="#__codelineno-25-1"></a>watch<span class="w"> </span>-n<span class="w"> </span><span class="m">1</span><span class="w"> </span>tail<span class="w"> </span>-n<span class="w"> </span><span class="m">30</span><span class="w"> </span>slurm-58070026.out
</span></code></pre></div>
<p>This will auto-refresh every second and is very helpful to track live progress.</p>
<p>To exit the <code>watch</code> session Press <code>Ctrl+Z</code>.</p>
<h2 id="8-canceling-a-job">8 Canceling a Job<a class="headerlink" href="#8-canceling-a-job" title="Permanent link">&para;</a></h2>
<p>If you want to stop a running or pending job you need to provide the cluster name (defaults to Genius), and the unique <code>&lt;jobID&gt;</code>, e.g.:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-26-1"><a id="__codelineno-26-1" name="__codelineno-26-1" href="#__codelineno-26-1"></a>scancel<span class="w"> </span><span class="m">58070026</span>
</span></code></pre></div>
<p>Or:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-27-1"><a id="__codelineno-27-1" name="__codelineno-27-1" href="#__codelineno-27-1"></a>scancel<span class="w"> </span>--user<span class="o">=</span><span class="nv">$USER</span>
</span></code></pre></div>
<hr />
<h2 id="9-after-the-job-completes">9. After the Job Completes<a class="headerlink" href="#9-after-the-job-completes" title="Permanent link">&para;</a></h2>
<p>Once your job finishes, you will receive an email from the SLURM scheduler. This email tells you whether the job <strong>completed</strong>, <strong>failed</strong>, or was <strong>cancelled</strong>.</p>
<h3 id="91-example-email-messages">9.1 Example Email Messages<a class="headerlink" href="#91-example-email-messages" title="Permanent link">&para;</a></h3>
<ul>
<li>
<p>✅ <strong>Successful run:</strong>
  <div class="language-text highlight"><pre><span></span><code><span id="__span-28-1"><a id="__codelineno-28-1" name="__codelineno-28-1" href="#__codelineno-28-1"></a>Slurm Job_id=58070026 Name=fmriprep_sub-42 Ended, Run time 03:41:05, COMPLETED, ExitCode 0
</span></code></pre></div></p>
</li>
<li>
<p>❌ <strong>Cancelled manually or by the system:</strong>
  <div class="language-text highlight"><pre><span></span><code><span id="__span-29-1"><a id="__codelineno-29-1" name="__codelineno-29-1" href="#__codelineno-29-1"></a>Slurm Job_id=58069757 Name=fmriprep_sub-42 Ended, Run time 00:00:00, CANCELLED, ExitCode 0
</span></code></pre></div></p>
</li>
<li>
<p>⚠️ <strong>Job failed with error:</strong>
  <div class="language-text highlight"><pre><span></span><code><span id="__span-30-1"><a id="__codelineno-30-1" name="__codelineno-30-1" href="#__codelineno-30-1"></a>Slurm Job_id=58069624 Name=fmriprep_sub-42 Failed, Run time 00:00:20, FAILED, ExitCode 255
</span></code></pre></div></p>
</li>
</ul>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>If you submit too many jobs, it is best not to enable email notifications.</p>
</div>
<hr />
<h3 id="92-inspecting-failed-jobs">9.2 Inspecting Failed Jobs<a class="headerlink" href="#92-inspecting-failed-jobs" title="Permanent link">&para;</a></h3>
<p>If your job failed, the first thing to do is inspect the <code>.out</code> and <code>.err</code> files written by SLURM. These contain the full log and error output from <code>fMRIPrep</code>.</p>
<ol>
<li>
<p>Go to the correct folder (usually <code>$VSC_DATA</code>):</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-31-1"><a id="__codelineno-31-1" name="__codelineno-31-1" href="#__codelineno-31-1"></a><span class="nb">cd</span><span class="w"> </span><span class="nv">$VSC_DATA</span>
</span></code></pre></div>
</li>
<li>
<p>Open the output file:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-32-1"><a id="__codelineno-32-1" name="__codelineno-32-1" href="#__codelineno-32-1"></a>nano<span class="w"> </span>slurm-58070026.out
</span></code></pre></div>
<ul>
<li>Use the arrow keys to scroll.</li>
<li>The error is usually toward the <strong>end</strong> of the file.</li>
<li>Press <code>Ctrl+X</code> to exit <code>nano</code>.</li>
</ul>
</li>
<li>
<p>Also open the error file:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-33-1"><a id="__codelineno-33-1" name="__codelineno-33-1" href="#__codelineno-33-1"></a>nano<span class="w"> </span>slurm-58070026.err
</span></code></pre></div>
<ul>
<li>This might contain Python tracebacks or messages from Singularity.</li>
</ul>
</li>
</ol>
<p>Make sure to check <strong>both files</strong>, as the error could appear in either.</p>
<hr />
<h3 id="93-verifying-successful-runs">9.3 Verifying Successful Runs<a class="headerlink" href="#93-verifying-successful-runs" title="Permanent link">&para;</a></h3>
<p>If the job completed successfully, it's time to check the output files.</p>
<p>In our SLURM script, the <code>--output</code> directory is bound to:</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-34-1"><a id="__codelineno-34-1" name="__codelineno-34-1" href="#__codelineno-34-1"></a>-B $VSC_DATA/data/BIDS/derivatives:/out
</span></code></pre></div>
<p>So the results will be saved under:</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-35-1"><a id="__codelineno-35-1" name="__codelineno-35-1" href="#__codelineno-35-1"></a>$VSC_DATA/data/BIDS/derivatives/fmriprep
</span></code></pre></div>
<p>To inspect the results:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-36-1"><a id="__codelineno-36-1" name="__codelineno-36-1" href="#__codelineno-36-1"></a><span class="nb">cd</span><span class="w"> </span><span class="nv">$VSC_DATA</span>/data/BIDS/derivatives/fmriprep
</span><span id="__span-36-2"><a id="__codelineno-36-2" name="__codelineno-36-2" href="#__codelineno-36-2"></a>ls
</span></code></pre></div>
<p>You should see something like this:</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-37-1"><a id="__codelineno-37-1" name="__codelineno-37-1" href="#__codelineno-37-1"></a>dataset_description.json  logs  sourcedata  sub-42  sub-42.html
</span></code></pre></div>
<p>Use the <code>tree</code> command to get a visual overview of the folder structure:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-38-1"><a id="__codelineno-38-1" name="__codelineno-38-1" href="#__codelineno-38-1"></a>tree<span class="w"> </span>-L<span class="w"> </span><span class="m">2</span><span class="w"> </span>.
</span></code></pre></div>
<p>Expected output:</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-39-1"><a id="__codelineno-39-1" name="__codelineno-39-1" href="#__codelineno-39-1"></a>fmriprep/
</span><span id="__span-39-2"><a id="__codelineno-39-2" name="__codelineno-39-2" href="#__codelineno-39-2"></a>├── dataset_description.json
</span><span id="__span-39-3"><a id="__codelineno-39-3" name="__codelineno-39-3" href="#__codelineno-39-3"></a>├── logs/
</span><span id="__span-39-4"><a id="__codelineno-39-4" name="__codelineno-39-4" href="#__codelineno-39-4"></a>│   ├── CITATION.bib
</span><span id="__span-39-5"><a id="__codelineno-39-5" name="__codelineno-39-5" href="#__codelineno-39-5"></a>│   ├── CITATION.html
</span><span id="__span-39-6"><a id="__codelineno-39-6" name="__codelineno-39-6" href="#__codelineno-39-6"></a>│   ├── CITATION.md
</span><span id="__span-39-7"><a id="__codelineno-39-7" name="__codelineno-39-7" href="#__codelineno-39-7"></a>│   └── CITATION.tex
</span><span id="__span-39-8"><a id="__codelineno-39-8" name="__codelineno-39-8" href="#__codelineno-39-8"></a>├── sourcedata/
</span><span id="__span-39-9"><a id="__codelineno-39-9" name="__codelineno-39-9" href="#__codelineno-39-9"></a>│   └── freesurfer/
</span><span id="__span-39-10"><a id="__codelineno-39-10" name="__codelineno-39-10" href="#__codelineno-39-10"></a>│       ├── fsaverage/
</span><span id="__span-39-11"><a id="__codelineno-39-11" name="__codelineno-39-11" href="#__codelineno-39-11"></a>│       └── sub-42/         # FreeSurfer recon-all output
</span><span id="__span-39-12"><a id="__codelineno-39-12" name="__codelineno-39-12" href="#__codelineno-39-12"></a>├── sub-42/
</span><span id="__span-39-13"><a id="__codelineno-39-13" name="__codelineno-39-13" href="#__codelineno-39-13"></a>│   ├── anat/
</span><span id="__span-39-14"><a id="__codelineno-39-14" name="__codelineno-39-14" href="#__codelineno-39-14"></a>│   │   ├── sub-42_desc-preproc_T1w.nii.gz
</span><span id="__span-39-15"><a id="__codelineno-39-15" name="__codelineno-39-15" href="#__codelineno-39-15"></a>│   │   ├── sub-42_dseg.nii.gz
</span><span id="__span-39-16"><a id="__codelineno-39-16" name="__codelineno-39-16" href="#__codelineno-39-16"></a>│   │   ├── sub-42_space-MNI152NLin2009cAsym_res-2_desc-preproc_T1w.nii.gz
</span><span id="__span-39-17"><a id="__codelineno-39-17" name="__codelineno-39-17" href="#__codelineno-39-17"></a>│   │   └── ...
</span><span id="__span-39-18"><a id="__codelineno-39-18" name="__codelineno-39-18" href="#__codelineno-39-18"></a>│   ├── func/
</span><span id="__span-39-19"><a id="__codelineno-39-19" name="__codelineno-39-19" href="#__codelineno-39-19"></a>│   │   ├── sub-42_task-*_desc-preproc_bold.nii.gz
</span><span id="__span-39-20"><a id="__codelineno-39-20" name="__codelineno-39-20" href="#__codelineno-39-20"></a>│   │   ├── sub-42_task-*_desc-confounds_timeseries.tsv
</span><span id="__span-39-21"><a id="__codelineno-39-21" name="__codelineno-39-21" href="#__codelineno-39-21"></a>│   │   ├── sub-42_task-*_space-MNI152NLin2009cAsym_res-2_desc-brain_mask.nii.gz
</span><span id="__span-39-22"><a id="__codelineno-39-22" name="__codelineno-39-22" href="#__codelineno-39-22"></a>│   │   └── ...
</span><span id="__span-39-23"><a id="__codelineno-39-23" name="__codelineno-39-23" href="#__codelineno-39-23"></a>│   ├── figures/
</span><span id="__span-39-24"><a id="__codelineno-39-24" name="__codelineno-39-24" href="#__codelineno-39-24"></a>│   │   ├── sub-42_desc-summary_T1w.html
</span><span id="__span-39-25"><a id="__codelineno-39-25" name="__codelineno-39-25" href="#__codelineno-39-25"></a>│   │   ├── sub-42_task-*_desc-summary_bold.html
</span><span id="__span-39-26"><a id="__codelineno-39-26" name="__codelineno-39-26" href="#__codelineno-39-26"></a>│   │   └── ...
</span><span id="__span-39-27"><a id="__codelineno-39-27" name="__codelineno-39-27" href="#__codelineno-39-27"></a>│   └── log/
</span><span id="__span-39-28"><a id="__codelineno-39-28" name="__codelineno-39-28" href="#__codelineno-39-28"></a>│       └── &lt;timestamped-folder&gt;/
</span><span id="__span-39-29"><a id="__codelineno-39-29" name="__codelineno-39-29" href="#__codelineno-39-29"></a>│           └── fmriprep.toml
</span><span id="__span-39-30"><a id="__codelineno-39-30" name="__codelineno-39-30" href="#__codelineno-39-30"></a>├── sub-42.html              # Subject-level report
</span></code></pre></div>
<p>This confirms that <code>fMRIPrep</code> completed for subject 42 and produced its derivatives, QC figures, and logs.</p>
<hr />
<h3 id="94-downloading-the-results-derivatives-to-your-local-machine">9.4 Downloading the Results (Derivatives) to Your Local Machine<a class="headerlink" href="#94-downloading-the-results-derivatives-to-your-local-machine" title="Permanent link">&para;</a></h3>
<p>After fMRIPrep completes successfully, you might want to retrieve the <code>derivatives/fmriprep</code> folder from the HPC back to your local computer for further analysis. The steps differ slightly depending on your operating system.</p>
<div class="tabbed-set tabbed-alternate" data-tabs="2:2"><input checked="checked" id="windows-winscp_1" name="__tabbed_2" type="radio" /><input id="macos--linux" name="__tabbed_2" type="radio" /><div class="tabbed-labels"><label for="windows-winscp_1">Windows (WinSCP)</label><label for="macos--linux">macOS / Linux</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<ol>
<li>
<p><strong>Log in via the Firewall</strong><br />
    Go to <a href="https://firewall.vscentrum.be/auth/login">https://firewall.vscentrum.be/auth/login</a> and enter your VSC credentials.</p>
</li>
<li>
<p><strong>Open WinSCP:</strong></p>
<ul>
<li>Host Name: <code>login.hpc.kuleuven.be</code></li>
<li>User Name: <code>vsc12345</code></li>
<li>(Optional) Load your private key if needed.</li>
</ul>
</li>
<li>
<p><strong>Navigate &amp; Download:</strong></p>
<ul>
<li>In WinSCP, navigate on the remote side to:
  <div class="language-text highlight"><pre><span></span><code><span id="__span-40-1"><a id="__codelineno-40-1" name="__codelineno-40-1" href="#__codelineno-40-1"></a>/data/leuven/123/vsc12345/data/BIDS/derivatives/fmriprep
</span></code></pre></div>
  (Replace <code>vsc12345</code> with your actual VSC username.)</li>
<li>On your local machine side, open (or create) a destination folder where you want to save the files.</li>
<li><strong>Drag and drop</strong> the <code>fmriprep</code> folder (or individual files) from the remote window to your local folder.</li>
<li>Alternatively, right-click and select <strong>Download</strong> or <strong>Download To...</strong>.</li>
</ul>
</li>
</ol>
<p>This will copy the <code>fmriprep</code> output directory (and its subfolders) to your local Windows computer.</p>
</div>
<div class="tabbed-block">
<ol>
<li>
<p><strong>Confirm Firewall Access</strong><br />
     Visit <a href="https://firewall.vscentrum.be/auth/login">https://firewall.vscentrum.be/auth/login</a> if your connection is blocked by the HPC firewall.</p>
</li>
<li>
<p><strong>Use <code>scp</code> or <code>rsync</code>:</strong></p>
<ul>
<li><strong>Basic <code>scp</code> example</strong>:
   <div class="language-bash highlight"><pre><span></span><code><span id="__span-41-1"><a id="__codelineno-41-1" name="__codelineno-41-1" href="#__codelineno-41-1"></a>scp<span class="w"> </span>-r<span class="w"> </span>vsc12345@login.hpc.kuleuven.be:/data/leuven/123/vsc12345/data/BIDS/derivatives/fmriprep<span class="w"> </span>/local/path/
</span></code></pre></div></li>
<li>The <code>-r</code> flag copies directories recursively.</li>
<li>Replace <code>vsc12345</code> and <code>123</code> with your own account details.</li>
<li>
<p><code>/local/path/</code> is the folder on your Mac/Linux machine where you want the data.</p>
</li>
<li>
<p><strong><code>rsync</code> (recommended for large data)</strong>:
   <div class="language-bash highlight"><pre><span></span><code><span id="__span-42-1"><a id="__codelineno-42-1" name="__codelineno-42-1" href="#__codelineno-42-1"></a>rsync<span class="w"> </span>-av<span class="w"> </span>--progress<span class="w"> </span><span class="se">\</span>
</span><span id="__span-42-2"><a id="__codelineno-42-2" name="__codelineno-42-2" href="#__codelineno-42-2"></a><span class="w">  </span>vsc12345@login.hpc.kuleuven.be:/data/leuven/123/vsc12345/data/BIDS/derivatives/fmriprep<span class="w"> </span><span class="se">\</span>
</span><span id="__span-42-3"><a id="__codelineno-42-3" name="__codelineno-42-3" href="#__codelineno-42-3"></a><span class="w">  </span>/local/path/
</span></code></pre></div></p>
</li>
<li><code>-a</code> preserves file attributes.</li>
<li><code>-v</code> is verbose output.</li>
<li>
<p><code>--progress</code> shows real-time progress info (optional).</p>
</li>
<li>
<p>Or, if you only want to <strong>quickly download reports</strong> and related files (for quick results check):
   <div class="language-text highlight"><pre><span></span><code><span id="__span-43-1"><a id="__codelineno-43-1" name="__codelineno-43-1" href="#__codelineno-43-1"></a>rsync -av --progress \
</span><span id="__span-43-2"><a id="__codelineno-43-2" name="__codelineno-43-2" href="#__codelineno-43-2"></a>--include=&#39;*/&#39; \
</span><span id="__span-43-3"><a id="__codelineno-43-3" name="__codelineno-43-3" href="#__codelineno-43-3"></a>--include=&#39;*.html&#39; \
</span><span id="__span-43-4"><a id="__codelineno-43-4" name="__codelineno-43-4" href="#__codelineno-43-4"></a>--include=&#39;*.svg&#39; \
</span><span id="__span-43-5"><a id="__codelineno-43-5" name="__codelineno-43-5" href="#__codelineno-43-5"></a>--include=&#39;*.png&#39; \
</span><span id="__span-43-6"><a id="__codelineno-43-6" name="__codelineno-43-6" href="#__codelineno-43-6"></a>--exclude=&#39;*&#39; \
</span><span id="__span-43-7"><a id="__codelineno-43-7" name="__codelineno-43-7" href="#__codelineno-43-7"></a>vsc12345@login.hpc.kuleuven.be:/data/leuven/123/vsc12345/data/BIDS/derivatives/fmriprep/ \
</span><span id="__span-43-8"><a id="__codelineno-43-8" name="__codelineno-43-8" href="#__codelineno-43-8"></a>/local/path/fmriprep_reports/
</span></code></pre></div></p>
</li>
</ul>
</li>
</ol>
<p>This will download the entire <code>fmriprep</code> output folder to your Mac or Linux machine for further analysis.</p>
</div>
</div>
</div>
<hr />
<h2 id="10-advanced-monitoring-resource-usage">10. Advanced: Monitoring Resource Usage<a class="headerlink" href="#10-advanced-monitoring-resource-usage" title="Permanent link">&para;</a></h2>
<p>Sometimes you want to inspect your job in real-time to check whether it is using the resources (CPU, memory) you requested.</p>
<h3 id="101-identify-the-compute-node">10.1 Identify the Compute Node<a class="headerlink" href="#101-identify-the-compute-node" title="Permanent link">&para;</a></h3>
<p>First, determine which compute node your job is running on by checking the job queue:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-44-1"><a id="__codelineno-44-1" name="__codelineno-44-1" href="#__codelineno-44-1"></a>squeue<span class="w"> </span>-M<span class="w"> </span>genius,wice<span class="w"> </span>-u<span class="w"> </span><span class="nv">$USER</span>
</span></code></pre></div>
<p>Example output:</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-45-1"><a id="__codelineno-45-1" name="__codelineno-45-1" href="#__codelineno-45-1"></a>CLUSTER: genius
</span><span id="__span-45-2"><a id="__codelineno-45-2" name="__codelineno-45-2" href="#__codelineno-45-2"></a>             JOBID PARTITION     NAME     USER ST       TIME  NODES NODELIST(REASON)
</span><span id="__span-45-3"><a id="__codelineno-45-3" name="__codelineno-45-3" href="#__codelineno-45-3"></a>          58070026     batch fmriprep vsc12345  R      40:46      1 r27i27n19
</span></code></pre></div>
<p>Look at the <strong>NODELIST</strong> column — in this case, your job is running on node <code>r27i27n19</code>.</p>
<p>If NODELIST shows <code>(Priority)</code> with state <code>PD</code> (for pending), it means your job is still waiting in the queue and hasn`t started yet.</p>
<h3 id="102-ssh-into-the-compute-node">10.2: SSH into the Compute Node<a class="headerlink" href="#102-ssh-into-the-compute-node" title="Permanent link">&para;</a></h3>
<p>To access the compute node where your job is running:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-46-1"><a id="__codelineno-46-1" name="__codelineno-46-1" href="#__codelineno-46-1"></a>ssh<span class="w"> </span>r27i27n19
</span></code></pre></div>
<p>You should see a message like:</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-47-1"><a id="__codelineno-47-1" name="__codelineno-47-1" href="#__codelineno-47-1"></a>Joining job 58070026
</span></code></pre></div>
<p>Also, the prompt will change from the login node (e.g., <code>tier2-p-login-2</code>) to the compute node (e.g., <code>r27i27n19</code>), indicating you are now inside the job environment on the actual node.</p>
<hr />
<h3 id="103-run-htop-to-monitor-resource-usage">10.3: Run <code>htop</code> to Monitor Resource Usage<a class="headerlink" href="#103-run-htop-to-monitor-resource-usage" title="Permanent link">&para;</a></h3>
<p>Once inside the compute node, run:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-48-1"><a id="__codelineno-48-1" name="__codelineno-48-1" href="#__codelineno-48-1"></a>htop<span class="w"> </span>-u<span class="w"> </span><span class="nv">$USER</span>
</span></code></pre></div>
<p>This opens a live system monitor like this one:</p>
<p><img alt="fmri-htop" src="../../assets/fmri-hpc-htop.png" /></p>
<p>Which shows:</p>
<ul>
<li>All processes currently running under your username</li>
<li>CPU usage per core</li>
<li>Memory usage</li>
<li>Process names and resource consumption</li>
</ul>
<p>You should see multiple processes associated with <code>fmriprep</code>. Ideally, if you requested 32 cores, you should see all 32 cores utilized — especially during parallelizable tasks. However, some parts of <code>fmriprep</code> can only run serially. During these phases, only 1–2 cores may be active, which is normal.</p>
<p>To exit <code>htop</code>, press <strong>F10</strong> or <strong>q</strong></p>
<hr />
<h2 id="11-references-and-links">11. References and Links<a class="headerlink" href="#11-references-and-links" title="Permanent link">&para;</a></h2>
<ul>
<li><a href="https://vlaams-supercomputing-centrum-vscdocumentation.readthedocs-hosted.com/en/latest/index.html">VSC Documentation</a></li>
<li><a href="https://icts.kuleuven.be/sc/onderzoeksgegevens/hpc">KU Leuven HPC Info</a></li>
<li><a href="https://firewall.vscentrum.be/auth/login">Firewall Access</a></li>
<li><a href="https://docs.vscentrum.be/compute/terminal/mobaxterm_access.html">SSH Access via MobaXterm</a></li>
<li><a href="https://docs.sylabs.io/">Singularity Docs</a>  </li>
<li><a href="https://fmriprep.org/en/stable/">fMRIPrep Docs</a>  </li>
</ul>
<p><strong>Happy Computing!</strong></p>







  
    
  
  


  <aside class="md-source-file">
    
      
  <span class="md-source-file__fact">
    <span class="md-icon" title="Last update">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M21 13.1c-.1 0-.3.1-.4.2l-1 1 2.1 2.1 1-1c.2-.2.2-.6 0-.8l-1.3-1.3c-.1-.1-.2-.2-.4-.2m-1.9 1.8-6.1 6V23h2.1l6.1-6.1zM12.5 7v5.2l4 2.4-1 1L11 13V7zM11 21.9c-5.1-.5-9-4.8-9-9.9C2 6.5 6.5 2 12 2c5.3 0 9.6 4.1 10 9.3-.3-.1-.6-.2-1-.2s-.7.1-1 .2C19.6 7.2 16.2 4 12 4c-4.4 0-8 3.6-8 8 0 4.1 3.1 7.5 7.1 7.9l-.1.2z"/></svg>
    </span>
    <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-datetime" title="July 9, 2025 13:46:26 CEST">July 9, 2025 13:46:26</span>
  </span>

    
    
    
      
  
  <span class="md-source-file__fact">
    <span class="md-icon" title="Contributors">
      
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 5.5A3.5 3.5 0 0 1 15.5 9a3.5 3.5 0 0 1-3.5 3.5A3.5 3.5 0 0 1 8.5 9 3.5 3.5 0 0 1 12 5.5M5 8c.56 0 1.08.15 1.53.42-.15 1.43.27 2.85 1.13 3.96C7.16 13.34 6.16 14 5 14a3 3 0 0 1-3-3 3 3 0 0 1 3-3m14 0a3 3 0 0 1 3 3 3 3 0 0 1-3 3c-1.16 0-2.16-.66-2.66-1.62a5.54 5.54 0 0 0 1.13-3.96c.45-.27.97-.42 1.53-.42M5.5 18.25c0-2.07 2.91-3.75 6.5-3.75s6.5 1.68 6.5 3.75V20h-13zM0 20v-1.5c0-1.39 1.89-2.56 4.45-2.9-.59.68-.95 1.62-.95 2.65V20zm24 0h-3.5v-1.75c0-1.03-.36-1.97-.95-2.65 2.56.34 4.45 1.51 4.45 2.9z"/></svg>
      
    </span>
    <nav>
      
        <a href="mailto:e.moravveji@gmail.com">Ehsan Moravveji</a>, 
        <a href="mailto:61991543+timmaniquet@users.noreply.github.com">Tim Maniquet</a>, 
        <a href="mailto:59078281+costantinoai@users.noreply.github.com">costantinoai</a>
    </nav>
  </span>

    
    
  </aside>


  



  <form class="md-feedback" name="feedback" hidden>
    <fieldset>
      <legend class="md-feedback__title">
        Was this page helpful?
      </legend>
      <div class="md-feedback__inner">
        <div class="md-feedback__list">
          
            <button class="md-feedback__icon md-icon" type="submit" title="This page was helpful" data-md-value="1">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 12a8 8 0 0 0-8-8 8 8 0 0 0-8 8 8 8 0 0 0 8 8 8 8 0 0 0 8-8m2 0a10 10 0 0 1-10 10A10 10 0 0 1 2 12 10 10 0 0 1 12 2a10 10 0 0 1 10 10M10 9.5c0 .8-.7 1.5-1.5 1.5S7 10.3 7 9.5 7.7 8 8.5 8s1.5.7 1.5 1.5m7 0c0 .8-.7 1.5-1.5 1.5S14 10.3 14 9.5 14.7 8 15.5 8s1.5.7 1.5 1.5m-5 7.73c-1.75 0-3.29-.73-4.19-1.81L9.23 14c.45.72 1.52 1.23 2.77 1.23s2.32-.51 2.77-1.23l1.42 1.42c-.9 1.08-2.44 1.81-4.19 1.81"/></svg>
            </button>
          
            <button class="md-feedback__icon md-icon" type="submit" title="This page could be improved" data-md-value="0">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 12a8 8 0 0 0-8-8 8 8 0 0 0-8 8 8 8 0 0 0 8 8 8 8 0 0 0 8-8m2 0a10 10 0 0 1-10 10A10 10 0 0 1 2 12 10 10 0 0 1 12 2a10 10 0 0 1 10 10m-6.5-4c.8 0 1.5.7 1.5 1.5s-.7 1.5-1.5 1.5-1.5-.7-1.5-1.5.7-1.5 1.5-1.5M10 9.5c0 .8-.7 1.5-1.5 1.5S7 10.3 7 9.5 7.7 8 8.5 8s1.5.7 1.5 1.5m2 4.5c1.75 0 3.29.72 4.19 1.81l-1.42 1.42C14.32 16.5 13.25 16 12 16s-2.32.5-2.77 1.23l-1.42-1.42C8.71 14.72 10.25 14 12 14"/></svg>
            </button>
          
        </div>
        <div class="md-feedback__note">
          
            <div data-md-value="1" hidden>
              
              
                
              
              
              
                
                
              
              Thanks for your feedback!
            </div>
          
            <div data-md-value="0" hidden>
              
              
                
              
              
              
                
                
              
              Thanks for your feedback! Help us improve this page by opening a new <a href="https://github.com/HOPLAB-LBP/hoplab-wiki/issues/new/?title=[Feedback]+fMRIprep%20on%20HPC+-+/research/fmri/fmri-hpc.html" target="_blank" rel="noopener">Issue</a>, or contact a Wiki manager.
            </div>
          
        </div>
      </div>
    </fieldset>
  </form>


                
              </article>
            </div>
          
          
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var labels=set.querySelector(".tabbed-labels");for(var tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
    
      
      <nav class="md-footer__inner md-grid" aria-label="Footer" >
        
          
          <a href="fmri-nimare.html" class="md-footer__link md-footer__link--prev" aria-label="Previous: Meta-analysis with NiMARE">
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
            </div>
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Previous
              </span>
              <div class="md-ellipsis">
                Meta-analysis with NiMARE
              </div>
            </div>
          </a>
        
        
          
          <a href="../eeg/index.html" class="md-footer__link md-footer__link--next" aria-label="Next: EEG (Electroencephalography)">
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Next
              </span>
              <div class="md-ellipsis">
                EEG (Electroencephalography)
              </div>
            </div>
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11z"/></svg>
            </div>
          </a>
        
      </nav>
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      <a href="#__consent">Change cookie settings</a>            
    

    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
      <div class="md-consent" data-md-component="consent" id="__consent" hidden>
        <div class="md-consent__overlay"></div>
        <aside class="md-consent__inner">
          <form class="md-consent__form md-grid md-typeset" name="consent">
            


  


<h4>Cookie consent</h4>
<p>Please, consider disabling your ad-blocker and allowing cookies for this Wiki .  We use cookies to recognize your repeated visits and preferences, as well as to measure the effectiveness of our documentation and whether users find what they're searching for. With your consent, you're helping us to make our documentation better.</p>
<input class="md-toggle" type="checkbox" id="__settings" >
<div class="md-consent__settings">
  <ul class="task-list">
    
    
      
        
  
  
    
    
  
  <li class="task-list-item">
    <label class="task-list-control">
      <input type="checkbox" name="analytics" checked>
      <span class="task-list-indicator"></span>
      Google Analytics
    </label>
  </li>

      
    
    
      
        
  
  
    
    
  
  <li class="task-list-item">
    <label class="task-list-control">
      <input type="checkbox" name="github" checked>
      <span class="task-list-indicator"></span>
      GitHub
    </label>
  </li>

      
    
    
  </ul>
</div>
<div class="md-consent__controls">
  
    
      <button class="md-button md-button--primary">Accept</button>
    
    
    
  
    
    
    
      <label class="md-button" for="__settings">Manage settings</label>
    
  
</div>
          </form>
        </aside>
      </div>
      <script>var consent=__md_get("__consent");if(consent)for(var input of document.forms.consent.elements)input.name&&(input.checked=consent[input.name]||!1);else"file:"!==location.protocol&&setTimeout((function(){document.querySelector("[data-md-component=consent]").hidden=!1}),250);var form=document.forms.consent;for(var action of["submit","reset"])form.addEventListener(action,(function(e){if(e.preventDefault(),"reset"===e.type)for(var n of document.forms.consent.elements)n.name&&(n.checked=!1);__md_set("__consent",Object.fromEntries(Array.from(new FormData(form).keys()).map((function(e){return[e,!0]})))),location.hash="",location.reload()}))</script>
    
    
      
      <script id="__config" type="application/json">{"base": "../..", "features": ["content.tabs.link", "content.code.copy", "content.code.select", "content.action.edit", "navigation.instant", "navigation.tracking", "navigation.tabs", "navigation.tabs.sticky", "navigation.top", "navigation.sections", "search.highlight", "navigation.indexes", "navigation.footer"], "search": "../../assets/javascripts/workers/search.d50fe291.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../assets/javascripts/bundle.56ea9cef.min.js"></script>
      
    
  </body>
</html>