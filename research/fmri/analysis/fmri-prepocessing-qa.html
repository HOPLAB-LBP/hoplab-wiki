
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="fmri-bids-conversion.html">
      
      
        <link rel="next" href="fmri-glm.html">
      
      
      <link rel="icon" href="../../../assets/hoplab_favicon_white.ico">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.5.42">
    
    
      
        <title>3. Pre-processing and QA - Hoplab Wiki</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.0253249f.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
        <script src="../../../assets/external/unpkg.com/iframe-worker/shim.js"></script>
      
    
    
      
        
        
        
        <link rel="stylesheet" href="../../../assets/external/fonts.googleapis.com/css.49ea35f2.css">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../stylesheets/extra.css">
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      
  


  
  

<script id="__analytics">function __md_analytics(){function e(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],e("js",new Date),e("config","G-71T36SYGT2"),document.addEventListener("DOMContentLoaded",(function(){document.forms.search&&document.forms.search.query.addEventListener("blur",(function(){this.value&&e("event","search",{search_term:this.value})}));document$.subscribe((function(){var t=document.forms.feedback;if(void 0!==t)for(var a of t.querySelectorAll("[type=submit]"))a.addEventListener("click",(function(a){a.preventDefault();var n=document.location.pathname,d=this.getAttribute("data-md-value");e("event","feedback",{page:n,data:d}),t.firstElementChild.disabled=!0;var r=t.querySelector(".md-feedback__note [data-md-value='"+d+"']");r&&(r.hidden=!1)})),t.hidden=!1})),location$.subscribe((function(t){e("config","G-71T36SYGT2",{page_path:t.pathname})}))}));var t=document.createElement("script");t.async=!0,t.src="https://www.googletagmanager.com/gtag/js?id=G-71T36SYGT2",document.getElementById("__analytics").insertAdjacentElement("afterEnd",t)}</script>
  
    <script>if("undefined"!=typeof __md_analytics){var consent=__md_get("__consent");consent&&consent.analytics&&__md_analytics()}</script>
  

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="custom" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#fmri-preprocessing-and-quality-assessment" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow md-header--lifted" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../../index.html" title="Hoplab Wiki" class="md-header__button md-logo" aria-label="Hoplab Wiki" data-md-component="logo">
      
  <img src="../../../assets/thicker_white_brain.svg" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Hoplab Wiki
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              3. Pre-processing and QA
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="custom" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2a7 7 0 0 0-7 7c0 2.38 1.19 4.47 3 5.74V17a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1v-2.26c1.81-1.27 3-3.36 3-5.74a7 7 0 0 0-7-7M9 21a1 1 0 0 0 1 1h4a1 1 0 0 0 1-1v-1H9z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="custom" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2a7 7 0 0 1 7 7c0 2.38-1.19 4.47-3 5.74V17a1 1 0 0 1-1 1H9a1 1 0 0 1-1-1v-2.26C6.19 13.47 5 11.38 5 9a7 7 0 0 1 7-7M9 21v-1h6v1a1 1 0 0 1-1 1h-4a1 1 0 0 1-1-1m3-17a5 5 0 0 0-5 5c0 2.05 1.23 3.81 3 4.58V16h4v-2.42c1.77-.77 3-2.53 3-4.58a5 5 0 0 0-5-5"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/HOPLAB-LBP/hoplab-wiki/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
  </div>
  <div class="md-source__repository">
    HOPLAB-LBP/hoplab-wiki
  </div>
</a>
      </div>
    
  </nav>
  
    
      
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../../../index.html" class="md-tabs__link">
        
  
    
  
  Home

      </a>
    </li>
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../get-started/index.html" class="md-tabs__link">
          
  
    
  
  Getting started

        </a>
      </li>
    
  

      
        
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../../index.html" class="md-tabs__link">
          
  
    
  
  Research

        </a>
      </li>
    
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../../../outreach.html" class="md-tabs__link">
        
  
    
  
  Science outreach

      </a>
    </li>
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../../../contribute.html" class="md-tabs__link">
        
  
    
  
  Contribute

      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
    
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../../index.html" title="Hoplab Wiki" class="md-nav__button md-logo" aria-label="Hoplab Wiki" data-md-component="logo">
      
  <img src="../../../assets/thicker_white_brain.svg" alt="logo">

    </a>
    Hoplab Wiki
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/HOPLAB-LBP/hoplab-wiki/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
  </div>
  <div class="md-source__repository">
    HOPLAB-LBP/hoplab-wiki
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../index.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Home
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../get-started/index.html" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Getting started
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_2" id="__nav_2_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Getting started
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../get-started/useful-links.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Useful links
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../get-started/mailing-lists.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Mailing lists
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../get-started/practical-setup.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Practical set-up
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../get-started/computer-setup.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Computer set-up
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../get-started/admin-procedures.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Administrative procedures
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../get-started/student-starter-pack.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Student starter pack
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
        
        
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" checked>
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../index.html" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Research
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_3" id="__nav_3_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Research
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_2" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../ethics/index.html" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Ethical approval
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_3_2" id="__nav_3_2_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_2">
            <span class="md-nav__icon md-icon"></span>
            Ethical approval
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ethics/MEC.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    EC onderzoek
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ethics/SMEC.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    SMEC
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_3" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../coding/index.html" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Coding practices
  </span>
  

            </a>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_3">
            <span class="md-nav__icon md-icon"></span>
            Coding practices
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_4" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../behaviour/index.html" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Behaviour
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_3_4" id="__nav_3_4_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_4">
            <span class="md-nav__icon md-icon"></span>
            Behaviour
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../behaviour/participants.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Find participants
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../behaviour/experimental-setup.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Set up your experiment
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_5" checked>
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../index.html" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    fMRI
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_3_5" id="__nav_3_5_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_5_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3_5">
            <span class="md-nav__icon md-icon"></span>
            fMRI
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../fmri-get-started.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    First steps
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../fmri-procedure.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Scanning procedure and info
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_5_4" checked>
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="index.html" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Analysis workflow
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_3_5_4" id="__nav_3_5_4_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_3_5_4_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3_5_4">
            <span class="md-nav__icon md-icon"></span>
            Analysis workflow
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="fmri-general.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    0. General information
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="fmri-setup-env.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    1. Set-up you environment
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="fmri-bids-conversion.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2. BIDS conversion
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    3. Pre-processing and QA
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="fmri-prepocessing-qa.html" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    3. Pre-processing and QA
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#preprocessing-quality-assessment-overview" class="md-nav__link">
    <span class="md-ellipsis">
      Preprocessing &amp; Quality Assessment Overview
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#preprocessing-with-fmriprep" class="md-nav__link">
    <span class="md-ellipsis">
      Preprocessing with fMRIPrep
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#quality-assessment-with-mriqc" class="md-nav__link">
    <span class="md-ellipsis">
      Quality Assessment with MRIQC
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#interpreting-fmriprep-and-mriqc-reports" class="md-nav__link">
    <span class="md-ellipsis">
      Interpreting fMRIPrep and MRIQC Reports
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#common-issues-with-fmriprep-and-mriqc" class="md-nav__link">
    <span class="md-ellipsis">
      Common Issues with fMRIPrep and MRIQC
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="fmri-glm.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    4. First-level analysis
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="fmri-rois.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    5. Regions of interest
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="fmri-mvpa.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    6. Multi-variate analysis
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="fmri-andrea-workflow.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    fMRI workflow example
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_6" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../eeg/index.html" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    EEG
  </span>
  

            </a>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_6">
            <span class="md-nav__icon md-icon"></span>
            EEG
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_7" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../eyetracking/index.html" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Eye-tracking
  </span>
  

            </a>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_7">
            <span class="md-nav__icon md-icon"></span>
            Eye-tracking
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_8" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../dnn/index.html" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Neural Networks
  </span>
  

            </a>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_8">
            <span class="md-nav__icon md-icon"></span>
            Neural Networks
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../outreach.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Science outreach
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../contribute.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Contribute
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#preprocessing-quality-assessment-overview" class="md-nav__link">
    <span class="md-ellipsis">
      Preprocessing &amp; Quality Assessment Overview
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#preprocessing-with-fmriprep" class="md-nav__link">
    <span class="md-ellipsis">
      Preprocessing with fMRIPrep
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#quality-assessment-with-mriqc" class="md-nav__link">
    <span class="md-ellipsis">
      Quality Assessment with MRIQC
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#interpreting-fmriprep-and-mriqc-reports" class="md-nav__link">
    <span class="md-ellipsis">
      Interpreting fMRIPrep and MRIQC Reports
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#common-issues-with-fmriprep-and-mriqc" class="md-nav__link">
    <span class="md-ellipsis">
      Common Issues with fMRIPrep and MRIQC
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
    <a href="https://github.com/HOPLAB-LBP/hoplab-wiki/edit/main/docs/research/fmri/analysis/fmri-prepocessing-qa.md" title="Edit this page" class="md-content__button md-icon">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10 20H6V4h7v5h5v3.1l2-2V8l-6-6H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h4zm10.2-7c.1 0 .3.1.4.2l1.3 1.3c.2.2.2.6 0 .8l-1 1-2.1-2.1 1-1c.1-.1.2-.2.4-.2m0 3.9L14.1 23H12v-2.1l6.1-6.1z"/></svg>
    </a>
  
  


<h1 id="fmri-preprocessing-and-quality-assessment">fMRI Preprocessing and Quality Assessment<a class="headerlink" href="#fmri-preprocessing-and-quality-assessment" title="Permanent link">&para;</a></h1>
<p>You should land on this page after having collected your (f)MRI data and <a href="fmri-bids-conversion.html">converted it to BIDS</a>.</p>
<h2 id="preprocessing-quality-assessment-overview">Preprocessing &amp; Quality Assessment Overview<a class="headerlink" href="#preprocessing-quality-assessment-overview" title="Permanent link">&para;</a></h2>
<p>In this page, you will learn how to preprocess fMRI data using <a href="https://fmriprep.org/en/stable/">fMRIPrep</a> and perform quality assessment with <a href="https://mriqc.readthedocs.io/en/stable/">MRIQC</a>. We will cover:</p>
<div class="grid cards">
<ul>
<li>
<p><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M15.9 18.45c1.35 0 2.45-1.1 2.45-2.45s-1.1-2.45-2.45-2.45c-1.36 0-2.45 1.1-2.45 2.45s1.09 2.45 2.45 2.45m5.2-1.77 1.48 1.16c.13.11.17.29.08.45l-1.4 2.42a.35.35 0 0 1-.43.15l-1.74-.7c-.36.28-.76.51-1.18.69l-.27 1.85c-.02.17-.17.3-.34.3h-2.8c-.18 0-.32-.13-.35-.3l-.26-1.85c-.43-.18-.82-.41-1.18-.69l-1.75.7c-.15.06-.34 0-.42-.15l-1.4-2.42a.35.35 0 0 1 .08-.45l1.48-1.16-.05-.68.05-.69-1.48-1.15a.35.35 0 0 1-.08-.45l1.4-2.42c.08-.16.27-.22.42-.16l1.75.71c.36-.28.75-.52 1.18-.69l.26-1.86c.03-.16.17-.29.35-.29h2.8c.17 0 .32.13.34.29l.27 1.86c.42.17.82.41 1.18.69l1.74-.71c.17-.06.34 0 .43.16l1.4 2.42c.09.15.05.34-.08.45l-1.48 1.15.05.69zM6.69 8.07c.87 0 1.57-.7 1.57-1.57s-.7-1.58-1.57-1.58A1.58 1.58 0 0 0 5.11 6.5c0 .87.71 1.57 1.58 1.57m3.34-1.13.97.74c.07.07.09.19.03.29l-.9 1.56c-.05.1-.17.14-.27.1l-1.12-.45-.74.44-.19 1.19c-.02.11-.11.19-.22.19h-1.8c-.12 0-.21-.08-.23-.19L5.4 9.62l-.76-.44-1.14.45c-.09.04-.2 0-.26-.1l-.9-1.56c-.06-.1-.03-.22.05-.29l.95-.74-.03-.44.03-.44-.95-.74a.23.23 0 0 1-.05-.29l.9-1.56c.06-.1.17-.14.26-.1l1.13.45.77-.44.16-1.19c.02-.11.11-.19.23-.19h1.8c.11 0 .2.08.22.19L8 3.38l.74.44 1.12-.45c.1-.04.22 0 .27.1l.9 1.56c.06.1.04.22-.03.29l-.97.74.03.44z"/></svg></span> <strong><a href="#preprocessing-with-fmriprep">Running fMRIPrep</a></strong><br />
  Step-by-step guide to run fMRIPrep, including the required command structure, key options, and output directory organization.</p>
</li>
<li>
<p><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.96 11.31C10.82 8.1 11.5 6 13 6s2.18 2.1 3.04 5.31C17 14.92 18.1 19 22 19v-2c-2.2 0-3-2.46-4.03-6.2C17.08 7.46 16.15 4 13 4s-4.08 3.46-4.97 6.8C7.03 14.54 6.2 17 4 17V2H2v20h20v-2H4v-1c3.9 0 5-4.08 5.96-7.69"/></svg></span> <strong><a href="#quality-assessment-with-mriqc">Performing Quality Control with MRIQC</a></strong><br />
  Use MRIQC to assess the quality of your MRI data. Identify potential artifacts and ensure data suitability for further analysis.</p>
</li>
<li>
<p><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 18c.56 0 1 .44 1 1s-.44 1-1 1-1-.44-1-1 .44-1 1-1m0-3c-2.73 0-5.06 1.66-6 4 .94 2.34 3.27 4 6 4s5.06-1.66 6-4c-.94-2.34-3.27-4-6-4m0 6.5a2.5 2.5 0 0 1-2.5-2.5 2.5 2.5 0 0 1 2.5-2.5 2.5 2.5 0 0 1 2.5 2.5 2.5 2.5 0 0 1-2.5 2.5m-7.86-1.75L8.85 19l.29-.74C10.43 15.06 13.5 13 17 13c1.05 0 2.06.21 3 .56V8l-6-6H6c-1.11 0-2 .89-2 2v16a2 2 0 0 0 2 2h4.5c-.55-.66-1-1.42-1.36-2.25M13 3.5 18.5 9H13z"/></svg></span> <strong><a href="#fmriprep-html-report">Interpreting fMRIPrep Outputs</a></strong><br />
  Understand the content of the fMRIPrep HTML report, including motion parameters, anatomical alignment, and other key quality checks.</p>
</li>
<li>
<p><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M22 21H2V3h2v16h2v-9h4v9h2V6h4v13h2v-5h4z"/></svg></span> <strong><a href="#mriqc-html-report">Reviewing MRIQC Reports</a></strong><br />
  Learn how to interpret MRIQC's visual reports and quality metrics, such as SNR and temporal SNR, to evaluate the data's integrity.</p>
</li>
<li>
<p><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 14h-2V9h2m0 9h-2v-2h2M1 21h22L12 2z"/></svg></span> <strong><a href="#common-issues-with-fmriprep-and-mriqc">Troubleshooting Common Issues</a></strong><br />
  Find solutions to common challenges with fMRIPrep and MRIQC, including memory management and output interpretation.</p>
</li>
<li>
<p><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M14 10H3v2h11zm0-4H3v2h11zM3 16h7v-2H3zm18.5-4.5L23 13l-7 7-4.5-4.5L13 14l3 3z"/></svg></span> <strong><a href="fmri-glm.html">Next Steps: GLM Analysis</a></strong><br />
  Once your data is preprocessed and quality-checked, move on to first-level analysis with the General Linear Model.</p>
</li>
</ul>
</div>
<ul>
<li>
<p><strong><a href="https://fmriprep.org/en/stable/">fMRIPrep Documentation</a></strong><br />
  Get detailed insights into the preprocessing steps, output formats, and recommended practices.</p>
</li>
<li>
<p><strong><a href="https://mriqc.readthedocs.io/en/stable/">MRIQC Documentation</a></strong><br />
  Explore MRIQC's metrics and recommendations for improving MRI data quality.</p>
</li>
<li>
<p><strong><a href="https://neurostars.org/tags/fmriprep">NeuroStars Community</a></strong><br />
  A valuable resource for troubleshooting and community discussions related to fMRIPrep and MRIQC.</p>
</li>
<li>
<p><strong><a href="https://www.youtube.com/watch?v=fQHEKSzFKDc">YouTube: Reviewing fMRIPrep Outputs</a></strong></p>
</li>
</ul>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>Before proceeding, ensure that your fMRI data is converted into <strong>BIDS format</strong>. Refer to the <a href="fmri-bids-conversion.html">BIDS Conversion Guide</a> for more details.</p>
</div>
<hr />
<h2 id="preprocessing-with-fmriprep">Preprocessing with fMRIPrep<a class="headerlink" href="#preprocessing-with-fmriprep" title="Permanent link">&para;</a></h2>
<h3 id="1-setting-up-fmriprep">1. Setting Up fMRIPrep<a class="headerlink" href="#1-setting-up-fmriprep" title="Permanent link">&para;</a></h3>
<p>To use fMRIPrep, ensure that you have:</p>
<ul>
<li><strong>Docker</strong> (or <strong>Singularity</strong> for HPC environments).</li>
<li>Installed the <code>fmriprep-docker</code> wrapper for easier command-line usage:</li>
</ul>
<div class="language-sh highlight"><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a>pip<span class="w"> </span>install<span class="w"> </span>fmriprep-docker
</span></code></pre></div>
<ul>
<li>A valid <strong>FreeSurfer license</strong> (<code>license.txt</code>) saved in a path accessible by fMRIPrep. This is needed for surface-based preprocessing.</li>
</ul>
<div class="admonition note">
<p class="admonition-title">System Requirements</p>
<p>fMRIPrep is resource-intensive. For optimal performance, allocate:</p>
<ul>
<li>At least <strong>16 GB RAM</strong> and <strong>4 CPUs</strong>.</li>
<li>A <strong>high-speed SSD</strong> for the working directory to improve I/O performance.</li>
</ul>
</div>
<p>For detailed instructions, visit the <a href="https://fmriprep.org/en/stable/installation.html">fMRIPrep Installation Guide</a>.</p>
<hr />
<h3 id="2-running-fmriprep">2. Running fMRIPrep<a class="headerlink" href="#2-running-fmriprep" title="Permanent link">&para;</a></h3>
<p>Once your environment is ready, you can run fMRIPrep using the following command:</p>
<div class="language-sh highlight"><pre><span></span><code><span id="__span-1-1"><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a>fmriprep-docker<span class="w"> </span>/path/to/BIDS<span class="w"> </span>/path/to/derivatives/fmriprep<span class="w"> </span>participant<span class="w"> </span><span class="se">\</span>
</span><span id="__span-1-2"><a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a><span class="w">    </span>--work-dir<span class="w"> </span>/path/to/temp_fmriprep<span class="w"> </span><span class="se">\</span>
</span><span id="__span-1-3"><a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a><span class="w">    </span>--fs-license-file<span class="w"> </span>/path/to/.license<span class="w"> </span><span class="se">\</span>
</span><span id="__span-1-4"><a id="__codelineno-1-4" name="__codelineno-1-4" href="#__codelineno-1-4"></a><span class="w">    </span>--output-spaces<span class="w"> </span>MNI152NLin2009cAsym:res-2<span class="w"> </span>anat<span class="w"> </span>fsnative<span class="w"> </span><span class="se">\</span>
</span><span id="__span-1-5"><a id="__codelineno-1-5" name="__codelineno-1-5" href="#__codelineno-1-5"></a><span class="w">    </span>--participant-label<span class="w"> </span>&lt;SUBJECT_ID&gt;<span class="w"> </span><span class="se">\</span>
</span><span id="__span-1-6"><a id="__codelineno-1-6" name="__codelineno-1-6" href="#__codelineno-1-6"></a><span class="w">    </span>--n-cpus<span class="w"> </span><span class="m">8</span><span class="w"> </span>--mem-mb<span class="w"> </span><span class="m">16000</span><span class="w"> </span>--notrack
</span></code></pre></div>
<p>Replace:</p>
<ul>
<li><code>/path/to/BIDS</code> with the path to your BIDS directory.</li>
<li><code>/path/to/derivatives/fmriprep</code> with where you want to store fMRIPrep outputs.</li>
<li><code>&lt;SUBJECT_ID&gt;</code> with the ID of the subject being processed.</li>
</ul>
<details class="question">
<summary>Why specify output spaces?</summary>
<p><code>--output-spaces</code> defines the spaces in which your data will be resampled. Common options include:</p>
<ul>
<li><strong>MNI152NLin2009cAsym</strong>: Standard volumetric template.</li>
<li><strong>anat</strong>: Subject’s native T1w space.</li>
<li><strong>fsnative</strong>: FreeSurfer's subject-specific surface space.</li>
</ul>
</details>
<h3 id="3-output-structure-and-files">3. Output Structure and Files<a class="headerlink" href="#3-output-structure-and-files" title="Permanent link">&para;</a></h3>
<p>After running fMRIPrep, the output will be in the <code>derivatives/fmriprep</code> folder. This includes:</p>
<ul>
<li><strong>Preprocessed anatomical images</strong> (<code>T1w</code>, <code>T2w</code>).</li>
<li><strong>Preprocessed functional images</strong> (BOLD series).</li>
<li><strong>Confounds</strong>: <code>.tsv</code> files containing motion parameters and other potential noise regressors.</li>
<li><strong>Reports</strong>: <code>sub-xx.html</code> files with a summary of the preprocessing.</li>
</ul>
<p>Refer to the <a href="https://fmriprep.org/en/stable/outputs.html">fMRIPrep Output Documentation</a> for more information.</p>
<hr />
<h2 id="quality-assessment-with-mriqc">Quality Assessment with MRIQC<a class="headerlink" href="#quality-assessment-with-mriqc" title="Permanent link">&para;</a></h2>
<h3 id="1-running-mriqc">1. Running MRIQC<a class="headerlink" href="#1-running-mriqc" title="Permanent link">&para;</a></h3>
<p>MRIQC helps identify potential issues in your data by generating quality metrics. Run MRIQC using Docker with the following command:</p>
<div class="language-sh highlight"><pre><span></span><code><span id="__span-2-1"><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a>docker<span class="w"> </span>run<span class="w"> </span>-it<span class="w"> </span>--rm<span class="w"> </span><span class="se">\</span>
</span><span id="__span-2-2"><a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a><span class="w">    </span>-v<span class="w"> </span>/path/to/BIDS:/data:ro<span class="w"> </span><span class="se">\</span>
</span><span id="__span-2-3"><a id="__codelineno-2-3" name="__codelineno-2-3" href="#__codelineno-2-3"></a><span class="w">    </span>-v<span class="w"> </span>/path/to/derivatives/mriqc:/out<span class="w"> </span><span class="se">\</span>
</span><span id="__span-2-4"><a id="__codelineno-2-4" name="__codelineno-2-4" href="#__codelineno-2-4"></a><span class="w">    </span>nipreps/mriqc:latest<span class="w"> </span>/data<span class="w"> </span>/out<span class="w"> </span>participant<span class="w"> </span><span class="se">\</span>
</span><span id="__span-2-5"><a id="__codelineno-2-5" name="__codelineno-2-5" href="#__codelineno-2-5"></a><span class="w">    </span>--participant-label<span class="w"> </span>&lt;SUBJECT_ID&gt;<span class="w"> </span>--nprocs<span class="w"> </span><span class="m">8</span><span class="w"> </span>--mem-gb<span class="w"> </span><span class="m">16</span><span class="w"> </span>--verbose-reports
</span></code></pre></div>
<p>This command will analyze individual subjects and save the results in the specified output directory. Replace the paths as appropriate.</p>
<div class="admonition tip">
<p class="admonition-title">Running Group-Level Analysis</p>
<p>After processing individual subjects, you can run a group-level analysis to compare metrics across subjects:</p>
<div class="language-sh highlight"><pre><span></span><code><span id="__span-3-1"><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a>docker<span class="w"> </span>run<span class="w"> </span>-it<span class="w"> </span>--rm<span class="w"> </span><span class="se">\</span>
</span><span id="__span-3-2"><a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a><span class="w">    </span>-v<span class="w"> </span>/path/to/BIDS:/data:ro<span class="w"> </span><span class="se">\</span>
</span><span id="__span-3-3"><a id="__codelineno-3-3" name="__codelineno-3-3" href="#__codelineno-3-3"></a><span class="w">    </span>-v<span class="w"> </span>/path/to/derivatives/mriqc:/out<span class="w"> </span><span class="se">\</span>
</span><span id="__span-3-4"><a id="__codelineno-3-4" name="__codelineno-3-4" href="#__codelineno-3-4"></a><span class="w">    </span>nipreps/mriqc:latest<span class="w"> </span>/data<span class="w"> </span>/out<span class="w"> </span>group<span class="w"> </span><span class="se">\</span>
</span><span id="__span-3-5"><a id="__codelineno-3-5" name="__codelineno-3-5" href="#__codelineno-3-5"></a><span class="w">    </span>--nprocs<span class="w"> </span><span class="m">8</span><span class="w"> </span>--mem-gb<span class="w"> </span><span class="m">16</span><span class="w"> </span>--verbose-reports
</span></code></pre></div>
</div>
<h3 id="2-understanding-mriqc-outputs">2. Understanding MRIQC Outputs<a class="headerlink" href="#2-understanding-mriqc-outputs" title="Permanent link">&para;</a></h3>
<p>MRIQC generates:</p>
<ul>
<li><strong>Visual reports</strong> (<code>sub-xx.html</code>) for each subject.</li>
<li><strong>CSV files</strong> with quality metrics.</li>
<li><strong>Group-level metrics</strong> for overall dataset quality.</li>
</ul>
<p>Refer to the <a href="https://mriqc.readthedocs.io/en/stable/">MRIQC Documentation</a> for a detailed explanation of each metric.</p>
<hr />
<h2 id="interpreting-fmriprep-and-mriqc-reports">Interpreting fMRIPrep and MRIQC Reports<a class="headerlink" href="#interpreting-fmriprep-and-mriqc-reports" title="Permanent link">&para;</a></h2>
<h3 id="fmriprep-html-report">fMRIPrep HTML Report<a class="headerlink" href="#fmriprep-html-report" title="Permanent link">&para;</a></h3>
<p>After running fMRIPrep, the outputs will be stored in the <code>derivatives/fmriprep</code> directory, with each subject's data organized into subfolders like <code>sub-01</code>. These folders contain both the preprocessed functional and anatomical data, alongside JSON files with metadata.</p>
<p>Each subject’s report (<code>sub-xx.html</code>) includes:</p>
<ul>
<li><strong>Registration Plots</strong>: Check the alignment of functional and anatomical images.</li>
<li><strong>Field Map Corrections</strong>: Review the effect of susceptibility distortion corrections.</li>
<li><strong>Motion Correction</strong>: Look for high motion frames using <strong>Framewise Displacement (FD)</strong> plots.</li>
</ul>
<details class="note">
<summary>What is Framewise Displacement (FD)?</summary>
<p>FD is a measure of head movement between frames. High FD values indicate potential motion artifacts.</p>
</details>
<p>Let’s walk through the key components of the output and how to interpret the HTML summary reports.</p>
<h4 id="1-output-directory-structure">1. Output Directory Structure<a class="headerlink" href="#1-output-directory-structure" title="Permanent link">&para;</a></h4>
<p>Within each subject's directory (<code>sub-01</code>):</p>
<ul>
<li><strong><code>anat/</code> folder</strong>: Contains anatomical images, including normalized versions (e.g., <code>MNI152</code> template) and images in native space.</li>
<li><strong><code>func/</code> folder</strong>: Contains functional data for each run, including:</li>
<li><strong>Confound Regressors</strong> (<code>.tsv</code>): Time series of noise estimates like white matter and cerebrospinal fluid (CSF).</li>
<li><strong>Preprocessed Functional Images</strong>: Aligned to templates like <code>MNI152</code>.</li>
<li><strong>Brain Masks</strong>: Estimated masks for the brain, used in further analyses.</li>
</ul>
<p>These files will be referenced in the HTML summary report, which provides an overview of the preprocessing steps and quality metrics.</p>
<h4 id="2-opening-the-html-summary-report">2. Opening the HTML Summary Report<a class="headerlink" href="#2-opening-the-html-summary-report" title="Permanent link">&para;</a></h4>
<p>To view the HTML report, navigate to <code>derivatives/fmriprep/sub-01/</code> and open <code>sub-01.html</code> by double-clicking it or using the terminal:</p>
<p>The report contains the following sections: <strong>Summary</strong>, <strong>Anatomical</strong>, <strong>Functional</strong>, <strong>About</strong>, <strong>Methods</strong>, and <strong>Errors</strong>. Use the tabs at the top of the report to navigate these sections.</p>
<h4 id="3-understanding-the-summary-section">3. Understanding the Summary Section<a class="headerlink" href="#3-understanding-the-summary-section" title="Permanent link">&para;</a></h4>
<p>The <strong>Summary</strong> tab includes:</p>
<ul>
<li><strong>Number of Structural and Functional Images</strong>: Lists the number of anatomical and functional images processed.</li>
<li><strong>Normalization Template</strong>: Shows the template used for alignment (e.g., <code>MNI152NLin2009cAsym</code>).</li>
<li><strong>FreeSurfer</strong>: Indicates whether surface-based preprocessing was performed.</li>
</ul>
<p>Make sure these details match the parameters specified in your fMRIPrep command.</p>
<h4 id="4-anatomical-quality-checks">4. Anatomical Quality Checks<a class="headerlink" href="#4-anatomical-quality-checks" title="Permanent link">&para;</a></h4>
<p>The <strong>Anatomical</strong> section provides:</p>
<ul>
<li><strong>Brain Mask Overlay</strong>: Displays the brain mask (red outline), gray matter (magenta), and white matter boundaries (blue) overlaid on the anatomical image in sagittal, axial, and coronal views.</li>
</ul>
<p><img alt="Trigger box" src="../../../assets/fmriprep-report-brainmaskoverlay.png" /></p>
<ul>
<li>
<p><strong>Normalization Check</strong>: A GIF compares the subject’s anatomical image with the MNI template. Ensure that:</p>
</li>
<li>
<p>The outlines of the brain and internal structures (e.g., ventricles) align well.</p>
</li>
<li>Any misalignment could indicate poor normalization, which may need further inspection.</li>
</ul>
<p><img alt="Trigger box" src="../../../assets/fmriprep-report-normalization.png" /></p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p><strong>Hover over the GIF</strong> to see the back-and-forth comparison between the subject's brain and the template. Look closely at the alignment of internal brain structures.</p>
</div>
<ul>
<li><strong>Surface Reconstruction</strong> if you ran the <code>recon-all</code> routine in fMRIprep</li>
</ul>
<p><img alt="Trigger box" src="../../../assets/fmriprep-report-surfacerecon.png" /></p>
<h4 id="5-functional-quality-checks">5. Functional Quality Checks<a class="headerlink" href="#5-functional-quality-checks" title="Permanent link">&para;</a></h4>
<p>In the <strong>Functional</strong> section, you’ll find:</p>
<ul>
<li><strong>Functional-to-Anatomical Alignment</strong>: A GIF shows how well the preprocessed functional images align with the anatomical image.</li>
</ul>
<div class="admonition tip">
<p class="admonition-title">Check for alignment</p>
<p>Check for alignment between internal structures like ventricles in the functional and anatomical images. Open the image in a new tab (Right Click on the image -&gt; Open in a new tab) and hover to see the dynamic image.</p>
</div>
<p><img alt="Trigger box" src="../../../assets/fmriprep-report-coreg.svg" /></p>
<ul>
<li><strong>CompCor Masks</strong>: Displays masks used for <strong>Anatomical Component Correction (aCompCor)</strong>:</li>
<li><strong>White Matter and CSF (Magenta)</strong>: Masks used to extract noise components.</li>
<li><strong>High-Variance Voxels (Blue)</strong>: Used for <strong>Functional Component Correction (fCompCor)</strong>.</li>
</ul>
<div class="admonition note">
<p class="admonition-title">Assessing Alignment</p>
<p>Good alignment between functional and anatomical images is crucial for accurate analysis. Pay special attention to lighter fluid-filled regions in the functional image, which should correspond with dark CSF areas in the anatomical image.</p>
</div>
<h4 id="6-bold-summary-and-carpet-plot">6. BOLD Summary and Carpet plot<a class="headerlink" href="#6-bold-summary-and-carpet-plot" title="Permanent link">&para;</a></h4>
<p>The report includes <strong>time series plots</strong> for various confounds:</p>
<ul>
<li><strong>Global Signal (GS)</strong>: Measures signal fluctuations across the entire brain.</li>
<li><strong>CSF Signal (GSCSF)</strong> and <strong>White Matter Signal</strong>: Represent fluctuations in specific tissue types.</li>
<li><strong>Motion Metrics (DVARS, Framewise Displacement)</strong>:</li>
<li><strong>DVARS</strong>: Shows changes in BOLD signal intensity from one time point to the next.</li>
<li><strong>Framewise Displacement (FD)</strong>: Tracks the amount of head movement between frames.</li>
<li><strong>Use DVARS and FD</strong> to identify frames with high motion that could affect data quality.</li>
</ul>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>High motion values often correlate with changes in global signal. Consider including these regressors in your GLM to account for motion-related noise.</p>
</div>
<p>The <strong>carpet plot</strong> displays time series of BOLD signals across different brain regions:</p>
<ul>
<li><strong>Cortex</strong> (blue), <strong>Subcortex</strong> (orange), <strong>Gray Matter</strong> (green), and <strong>White Matter/CSF</strong> (red).</li>
<li>Look for <strong>sudden changes across a column</strong>, which may indicate motion artifacts affecting the entire brain at a particular time point.</li>
</ul>
<p><img alt="Trigger box" src="../../../assets/fmriprep-report-boldsummary.png" /></p>
<h4 id="7-correlation-matrix-of-confound-regressors">7. Correlation Matrix of Confound Regressors<a class="headerlink" href="#7-correlation-matrix-of-confound-regressors" title="Permanent link">&para;</a></h4>
<p>The report also includes a <strong>correlation matrix</strong> showing relationships between confound regressors:</p>
<ul>
<li>High correlations between <strong>CSF</strong> and <strong>motion regressors</strong> may indicate that motion affects CSF signals.</li>
<li>Use this matrix to decide which regressors to include in your GLM for better noise correction.</li>
</ul>
<div class="admonition note">
<p class="admonition-title">High Correlations</p>
<p>High correlation values may suggest redundancy among some regressors. Consider removing or combining them to avoid overfitting when building your GLM.</p>
</div>
<p><img alt="Trigger box" src="../../../assets/fmriprep-report-confoundscorr.png" /></p>
<h4 id="8-making-decisions-for-further-analysis">8. Making Decisions for Further Analysis<a class="headerlink" href="#8-making-decisions-for-further-analysis" title="Permanent link">&para;</a></h4>
<p>After reviewing the report:</p>
<ul>
<li><strong>Identify Good Quality Runs</strong>: Look for well-aligned images and minimal motion artifacts.</li>
<li><strong>Decide on Regressors</strong>: Choose confounds like <strong>DVARS</strong>, <strong>FD</strong>, and <strong>CompCor</strong> components to include in your GLM.</li>
</ul>
<div class="admonition question">
<p class="admonition-title">What confound regressors should I use in my GLM?</p>
<p>A common choice is to include at least the 6 Head Motion parameters, and optionally FD and Global Signal ad nuisance regressors in your GLM.  </p>
<p>See <a href="https://neurostars.org/t/confounds-from-fmriprep-which-one-would-you-use-for-glm/326/45">this awesome NeuroStars conversation</a> with advice on choosing regressors and relevant resources.</p>
</div>
<p>For more details on interpreting fMRIPrep reports, see the <a href="https://fmriprep.org/en/stable/outputs.html">fMRIPrep Outputs Documentation</a> and discussions on <a href="https://neurostars.org/tags/fmriprep">NeuroStars</a>.</p>
<hr />
<h3 id="mriqc-html-report">MRIQC HTML Report<a class="headerlink" href="#mriqc-html-report" title="Permanent link">&para;</a></h3>
<p>The MRIQC report highlights:</p>
<ul>
<li><strong>Summary Image</strong>: A visual overview of key metrics, including <strong>signal-to-noise ratio (SNR)</strong> and <strong>temporal SNR (tSNR)</strong>.</li>
<li><strong>Detailed Metrics</strong>: Click through different tabs to examine metrics like <strong>Mean Framewise Displacement</strong>, <strong>EPI-to-T1w registration quality</strong>, and <strong>artifact presence</strong>.</li>
</ul>
<div class="admonition info">
<p class="admonition-title">Interpreting tSNR</p>
<p>Higher <strong>temporal SNR (tSNR)</strong> values indicate better data quality. Typical values range from 30-60 for fMRI. Low tSNR may suggest issues like excessive noise or scanner artifacts. Review the group-level metrics to identify subjects with unusually high motion or low tSNR.</p>
</div>
<p>For more information on understanding these metrics, check out the <a href="https://neurostars.org/t/how-to-interpret-mriqc-metrics/">MRIQC interpretation guide on NeuroStars</a>.</p>
<hr />
<h2 id="common-issues-with-fmriprep-and-mriqc">Common Issues with fMRIPrep and MRIQC<a class="headerlink" href="#common-issues-with-fmriprep-and-mriqc" title="Permanent link">&para;</a></h2>
<details class="failure">
<summary>Memory Errors: Out of Memory (OOM) or Crash</summary>
<ul>
<li><strong>Problem</strong>: fMRIPrep crashes or terminates unexpectedly due to insufficient memory.</li>
<li><strong>Solution</strong>: Reduce the <code>--mem-mb</code> parameter to allocate less memory or increase the swap space available on your system. This can help prevent OOM errors.</li>
<li><strong>Tip</strong>: Monitor your memory usage during processing using tools like <code>htop</code> (Linux) or <strong>Activity Monitor</strong> (Mac). Aim to use around 80-90% of your available RAM without exceeding it.</li>
</ul>
</details>
<details class="failure">
<summary>Docker File Permissions Error</summary>
<ul>
<li><strong>Problem</strong>: fMRIPrep cannot access input or output directories due to file permissions.</li>
<li><strong>Solution</strong>: Ensure that Docker has read and write permissions to the directories being mounted. Adjust permissions using:
  <div class="language-sh highlight"><pre><span></span><code><span id="__span-4-1"><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a>chmod<span class="w"> </span>-R<span class="w"> </span><span class="m">755</span><span class="w"> </span>/path/to/BIDS<span class="w"> </span>/path/to/derivatives
</span></code></pre></div></li>
<li><strong>Tip</strong>: On Windows, ensure that <strong>Shared Drives</strong> are enabled in Docker Desktop settings.</li>
</ul>
</details>
<details class="failure">
<summary>Missing Fields in JSON Files</summary>
<ul>
<li><strong>Problem</strong>: fMRIPrep fails due to missing <code>SliceTiming</code> or <code>PhaseEncodingDirection</code> fields in the JSON sidecar files.</li>
<li><strong>Solution</strong>: Verify that all required metadata fields are present using the <a href="https://bids-standard.github.io/bids-validator/">BIDS Validator</a>. For guidance on JSON sidecar fields, see the <a href="https://bids-specification.readthedocs.io/en/stable/">BIDS Specification</a>.</li>
<li><strong>Tip</strong>: If using custom acquisition parameters, manually edit JSON files to include the missing fields.</li>
</ul>
</details>
<details class="failure">
<summary>RuntimeError: Fieldmap Issues</summary>
<ul>
<li><strong>Problem</strong>: fMRIPrep throws a <code>RuntimeError</code> related to fieldmaps, such as missing or improperly specified fieldmaps.</li>
<li><strong>Solution</strong>: Ensure that fieldmaps are correctly specified in your BIDS dataset according to the <a href="https://bids-specification.readthedocs.io/en/stable/06-derivatives/03-field-maps.html">BIDS Fieldmap documentation</a>.</li>
<li><strong>Tip</strong>: If your study does not require fieldmap correction, you can skip this step by specifying <code>--ignore fieldmaps</code> in your fMRIPrep command.</li>
</ul>
</details>
<details class="failure">
<summary>MRIQC: NaN Values in JSON Files</summary>
<ul>
<li><strong>Problem</strong>: MRIQC fails when encountering <code>NaN</code> values in JSON metadata files.</li>
<li><strong>Solution</strong>: Use a script like <code>sanitize_json.py</code> to replace <code>NaN</code> values with valid placeholders before running MRIQC.</li>
<li><strong>Tip</strong>: Validate your JSON files before running MRIQC to avoid processing interruptions.</li>
</ul>
</details>
<details class="failure">
<summary>Docker: Cannot Allocate Memory</summary>
<ul>
<li><strong>Problem</strong>: fMRIPrep crashes with the error <code>cannot allocate memory</code> when using Docker.</li>
<li><strong>Solution</strong>: Restart the Docker service or allocate more memory and CPUs through the Docker Desktop settings under <strong>Resources</strong>.</li>
<li><strong>Tip</strong>: Increase memory allocation gradually (e.g., 2-4 GB increments) until fMRIPrep runs smoothly.</li>
</ul>
</details>
<details class="failure">
<summary>Slow Processing: fMRIPrep Takes Too Long</summary>
<ul>
<li><strong>Problem</strong>: fMRIPrep runs slowly, taking an excessively long time for each subject.</li>
<li><strong>Solution</strong>: Use a <strong>faster SSD</strong> for the <code>--work-dir</code> to improve read/write speeds and reduce processing time. Also, ensure <code>--n-cpus</code> is set to the majority of available cores, but not all, to avoid system slowdowns.</li>
<li><strong>Tip</strong>: Consider running fMRIPrep on a <strong>high-performance computing (HPC)</strong> cluster if available.</li>
</ul>
</details>
<details class="failure">
<summary>Missing or Corrupted Output Files</summary>
<ul>
<li><strong>Problem</strong>: After running fMRIPrep or MRIQC, certain output files (e.g., <code>sub-xx.html</code> reports) are missing or corrupted.</li>
<li><strong>Solution</strong>: Check for errors in the log files generated during the run. Often, disk space issues or interruptions during processing can cause missing files. Re-run the affected subjects with sufficient disk space.</li>
<li><strong>Tip</strong>: Use a dedicated work directory and ensure it has at least <strong>100 GB</strong> of free space to accommodate intermediate files.</li>
</ul>
</details>
<details class="failure">
<summary>MRIQC: No Group Report Generated</summary>
<ul>
<li><strong>Problem</strong>: Group-level analysis in MRIQC does not produce a report.</li>
<li><strong>Solution</strong>: Ensure that MRIQC was run in <strong>group mode</strong> using the correct <code>group</code> argument. Check if all individual reports are present in the output directory before running the group-level command.</li>
<li><strong>Tip</strong>: Verify that the <code>derivatives/mriqc</code> directory has read and write access for Docker.</li>
</ul>
</details>
<hr />
<p>With these quality checks complete, you’re ready to proceed to the <strong>General Linear Model (GLM) analysis</strong>. See the next guide for instructions on setting up your GLM. <a href="fmri-glm.html">&rarr; Go to GLM</a></p>







  
    
  
  


  <aside class="md-source-file">
    
      
  <span class="md-source-file__fact">
    <span class="md-icon" title="Last update">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M21 13.1c-.1 0-.3.1-.4.2l-1 1 2.1 2.1 1-1c.2-.2.2-.6 0-.8l-1.3-1.3c-.1-.1-.2-.2-.4-.2m-1.9 1.8-6.1 6V23h2.1l6.1-6.1zM12.5 7v5.2l4 2.4-1 1L11 13V7zM11 21.9c-5.1-.5-9-4.8-9-9.9C2 6.5 6.5 2 12 2c5.3 0 9.6 4.1 10 9.3-.3-.1-.6-.2-1-.2s-.7.1-1 .2C19.6 7.2 16.2 4 12 4c-4.4 0-8 3.6-8 8 0 4.1 3.1 7.5 7.1 7.9l-.1.2z"/></svg>
    </span>
    <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-datetime">October 20, 2024 01:17:23</span>
  </span>

    
    
    
      
  
  <span class="md-source-file__fact">
    <span class="md-icon" title="Contributors">
      
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 4a4 4 0 0 1 4 4 4 4 0 0 1-4 4 4 4 0 0 1-4-4 4 4 0 0 1 4-4m0 10c4.42 0 8 1.79 8 4v2H4v-2c0-2.21 3.58-4 8-4"/></svg>
      
    </span>
    <nav>
      
        <a href="mailto:59078281+costantinoai@users.noreply.github.com">costantinoai</a>
    </nav>
  </span>

    
    
  </aside>


  



  <form class="md-feedback" name="feedback" hidden>
    <fieldset>
      <legend class="md-feedback__title">
        Was this page helpful?
      </legend>
      <div class="md-feedback__inner">
        <div class="md-feedback__list">
          
            <button class="md-feedback__icon md-icon" type="submit" title="This page was helpful" data-md-value="1">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 12a8 8 0 0 0-8-8 8 8 0 0 0-8 8 8 8 0 0 0 8 8 8 8 0 0 0 8-8m2 0a10 10 0 0 1-10 10A10 10 0 0 1 2 12 10 10 0 0 1 12 2a10 10 0 0 1 10 10M10 9.5c0 .8-.7 1.5-1.5 1.5S7 10.3 7 9.5 7.7 8 8.5 8s1.5.7 1.5 1.5m7 0c0 .8-.7 1.5-1.5 1.5S14 10.3 14 9.5 14.7 8 15.5 8s1.5.7 1.5 1.5m-5 7.73c-1.75 0-3.29-.73-4.19-1.81L9.23 14c.45.72 1.52 1.23 2.77 1.23s2.32-.51 2.77-1.23l1.42 1.42c-.9 1.08-2.44 1.81-4.19 1.81"/></svg>
            </button>
          
            <button class="md-feedback__icon md-icon" type="submit" title="This page could be improved" data-md-value="0">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 12a8 8 0 0 0-8-8 8 8 0 0 0-8 8 8 8 0 0 0 8 8 8 8 0 0 0 8-8m2 0a10 10 0 0 1-10 10A10 10 0 0 1 2 12 10 10 0 0 1 12 2a10 10 0 0 1 10 10m-6.5-4c.8 0 1.5.7 1.5 1.5s-.7 1.5-1.5 1.5-1.5-.7-1.5-1.5.7-1.5 1.5-1.5M10 9.5c0 .8-.7 1.5-1.5 1.5S7 10.3 7 9.5 7.7 8 8.5 8s1.5.7 1.5 1.5m2 4.5c1.75 0 3.29.72 4.19 1.81l-1.42 1.42C14.32 16.5 13.25 16 12 16s-2.32.5-2.77 1.23l-1.42-1.42C8.71 14.72 10.25 14 12 14"/></svg>
            </button>
          
        </div>
        <div class="md-feedback__note">
          
            <div data-md-value="1" hidden>
              
              
                
              
              Thanks for your feedback!
            </div>
          
            <div data-md-value="0" hidden>
              
              
                
              
              Thanks for your feedback! Help us improve this page by opening a new <a href="https://github.com/HOPLAB-LBP/hoplab-wiki/issues/new/?title=[Feedback]+3.%20Pre-processing%20and%20QA+-+/research/fmri/analysis/fmri-prepocessing-qa.html" target="_blank" rel="noopener">Issue</a>, or contact a Wiki manager.
            </div>
          
        </div>
      </div>
    </fieldset>
  </form>


                
              </article>
            </div>
          
          
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var labels=set.querySelector(".tabbed-labels");for(var tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      <a href="#__consent">Change cookie settings</a>            
    

    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
      <div class="md-consent" data-md-component="consent" id="__consent" hidden>
        <div class="md-consent__overlay"></div>
        <aside class="md-consent__inner">
          <form class="md-consent__form md-grid md-typeset" name="consent">
            

  
    
  


  
    
  



  


<h4>Cookie consent</h4>
<p>Please, consider disabling your ad-blocker and allowing cookies for this Wiki .  We use cookies to recognize your repeated visits and preferences, as well as to measure the effectiveness of our documentation and whether users find what they're searching for. With your consent, you're helping us to make our documentation better.</p>
<input class="md-toggle" type="checkbox" id="__settings" >
<div class="md-consent__settings">
  <ul class="task-list">
    
      
      
        
        
      
      <li class="task-list-item">
        <label class="task-list-control">
          <input type="checkbox" name="analytics" checked>
          <span class="task-list-indicator"></span>
          Google Analytics
        </label>
      </li>
    
      
      
        
        
      
      <li class="task-list-item">
        <label class="task-list-control">
          <input type="checkbox" name="github" checked>
          <span class="task-list-indicator"></span>
          GitHub
        </label>
      </li>
    
  </ul>
</div>
<div class="md-consent__controls">
  
    
      <button class="md-button md-button--primary">Accept</button>
    
    
    
  
    
    
    
      <label class="md-button" for="__settings">Manage settings</label>
    
  
</div>
          </form>
        </aside>
      </div>
      <script>var consent=__md_get("__consent");if(consent)for(var input of document.forms.consent.elements)input.name&&(input.checked=consent[input.name]||!1);else"file:"!==location.protocol&&setTimeout((function(){document.querySelector("[data-md-component=consent]").hidden=!1}),250);var form=document.forms.consent;for(var action of["submit","reset"])form.addEventListener(action,(function(e){if(e.preventDefault(),"reset"===e.type)for(var n of document.forms.consent.elements)n.name&&(n.checked=!1);__md_set("__consent",Object.fromEntries(Array.from(new FormData(form).keys()).map((function(e){return[e,!0]})))),location.hash="",location.reload()}))</script>
    
    <script id="__config" type="application/json">{"base": "../../..", "features": ["content.tabs.link", "content.code.copy", "content.code.select", "content.action.edit", "navigation.instant", "navigation.tracking", "navigation.tabs", "navigation.tabs.sticky", "navigation.top", "navigation.sections", "search.highlight", "navigation.indexes"], "search": "../../../assets/javascripts/workers/search.6ce7567c.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../../assets/javascripts/bundle.83f73b43.min.js"></script>
      
        <script src="../../../assets/external/unpkg.com/mermaid@11/dist/mermaid.min.js"></script>
      
    
  </body>
</html>